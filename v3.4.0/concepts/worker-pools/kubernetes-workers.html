
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="This article explains how you can run worker pools that use Kubernetes to execute runs.">
      
      
        <meta name="author" content="Spacelift">
      
      
        <link rel="canonical" href="https://docs.spacelift.io/self-hosted/latest/concepts/worker-pools/kubernetes-workers.html">
      
      
        <link rel="prev" href="docker-based-workers.html">
      
      
        <link rel="next" href="../spacectl.html">
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.1.18">
    
    
      
        <title>Kubernetes Workers - Spacelift Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.26e3688c.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ecc896b0.min.css">
      
      

    
    
  
    
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-W9B4T9S');</script>

    
    <script>
      function debounce(func, wait) {
	      var timeout;
	      return function() {
		      var context = this, args = arguments;
		      clearTimeout(timeout);
		      timeout = setTimeout(function() {
			      timeout = null;
			      func.apply(context, args);
		      }, wait);
	      };
      }

      document.addEventListener("DOMContentLoaded", function () {
        document.querySelector("[data-md-component=search-query]").addEventListener("input", debounce(function(event) {
          var value = event.target.value;
          if (!value) {
            return;
          }
          window.dataLayer.push({
            event: "search",
            searchTerm: value,
          });
        }, 1000))
      });
      
    </script>

    
    <script> (function(ss,ex){ window.ldfdr=window.ldfdr||function(){(ldfdr._q=ldfdr._q||[]).push([].slice.call(arguments));}; (function(d,s){ fs=d.getElementsByTagName(s)[0]; function ce(src){ var cs=d.createElement(s); cs.src=src; cs.async=1; fs.parentNode.insertBefore(cs,fs); }; ce('https://sc.lfeeder.com/lftracker_v1_'+ss+(ex?'_'+ex:'')+'.js'); })(document,'script'); })('3P1w24dxn2k4mY5n'); </script>

    
    <script type="text/javascript">
      window._mfq = window._mfq || [];
      (function() {
        var mf = document.createElement("script");
        mf.type = "text/javascript"; mf.defer = true;
        mf.src = "//cdn.mouseflow.com/projects/00dd0e5e-d30d-4b59-a7cc-fbacc9ea1f57.js";
        document.getElementsByTagName("head")[0].appendChild(mf);
      })();
    </script>
    
    <script>
      !function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on","addSourceMiddleware","addIntegrationMiddleware","setAnonymousId","addDestinationMiddleware"];analytics.factory=function(e){return function(){var t=Array.prototype.slice.call(arguments);t.unshift(e);analytics.push(t);return analytics}};for(var e=0;e<analytics.methods.length;e++){var key=analytics.methods[e];analytics[key]=analytics.factory(key)}analytics.load=function(key,e){var t=document.createElement("script");t.type="text/javascript";t.async=!0;t.src="https://cdn.segment.com/analytics.js/v1/" + key + "/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n);analytics._loadOptions=e};analytics._writeKey="WPnjYyyzDs7aCZdEvAX8ajH8Fvg5rbis";;analytics.SNIPPET_VERSION="4.15.3";
      var middleware = function ({ payload, next, integrations }) {
        if(!payload.obj.userId) {
          payload.obj.integrations["Actions Amplitude"] = false;
          payload.obj.integrations["Pendo"] = false;
        }
        next(payload);
      };
      analytics.addSourceMiddleware(middleware);
      analytics.load("WPnjYyyzDs7aCZdEvAX8ajH8Fvg5rbis");
      analytics.page();

      document.addEventListener("DOMContentLoaded", function() {
        location$.subscribe(function(url) {
          analytics.page();
        })
      });
      }}();
    </script>
  

  <script>
    document.addEventListener("DOMContentLoaded", function () {
      location$.subscribe(function (url) {
        analytics.page({url: url.href, path: url.pathname, title: ""})
      })
    });
  </script>

    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Nunito+Sans:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Nunito Sans";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/css/custom.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  
    <meta name="googlebot" content="index,follow"/>
    <meta name="robots" content="index,follow"/>
  

   <link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../../assets/javascripts/glightbox.min.js"></script></head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="spacelift" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#kubernetes-workers" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      


<header class="md-header " data-md-component="header">
  

  <nav class="md-header__inner md-grid" aria-label="">
    <a href="../.." title="Spacelift Documentation" class="md-header__button md-logo" aria-label="Spacelift Documentation" data-md-component="logo">
      
  <img src="../../assets/images/logo-selfhosted.svg" alt="logo">

    </a>
    <a href="../.." title="Spacelift Documentation" class="md-header__button md-logo logo--small" aria-label="Spacelift Documentation" data-md-component="logo">
      <svg width="127" height="29" viewBox="0 0 127 29" fill="none" xmlns="http://www.w3.org/2000/svg">
  <g clip-path="url(#clip0_1558_12595)">
  <path d="M4.14743 20.2839C2.37689 20.0464 2.23263 19.7222 2.23263 19.3541C2.23263 19.0409 2.42089 18.5155 3.68104 18.5155C5.12227 18.5155 5.4322 19.1021 5.53956 19.5432L5.55886 19.6229H7.42966L7.41889 19.5092C7.36579 18.9461 6.94637 17.1099 3.77146 17.1099C1.24549 17.1099 0.348912 18.3995 0.348912 19.504C0.348912 20.8483 1.3723 21.5818 3.66807 21.8823C5.63045 22.1198 5.79261 22.5281 5.79261 22.9613C5.79261 23.5972 5.21412 23.92 4.07263 23.92C2.87747 23.92 2.15074 23.5073 1.91186 22.693L1.8899 22.6179H0L0.0192943 22.7382C0.285581 24.4015 1.72484 25.3553 3.96797 25.3553C6.32461 25.3553 7.67638 24.4335 7.67638 22.8265C7.67638 21.7578 7.24877 20.71 4.14743 20.2839Z" fill="white"/>
  <path d="M13.9331 17.1099C12.45 17.1099 11.6169 17.7189 11.155 18.3264C11.1504 17.9594 11.1372 17.5881 11.1116 17.4088L11.0988 17.3195H9.24176L9.24435 17.4261C9.2592 18.0535 9.2592 18.6965 9.2592 19.3244V28.4533H11.1576V24.3204C11.469 24.6735 11.8583 24.9506 12.2951 25.1301C12.732 25.3096 13.2047 25.3866 13.6764 25.3552C15.9282 25.3552 17.6266 23.5282 17.6266 21.1055C17.6266 18.8277 16.0386 17.1099 13.9331 17.1099ZM15.6827 21.1801C15.6827 22.3749 15.0823 23.7701 13.3903 23.7701C11.964 23.7701 11.1124 22.8354 11.1124 21.27C11.1124 19.6333 11.9538 18.695 13.4206 18.695C14.9836 18.695 15.6827 19.9432 15.6827 21.1801V21.1801Z" fill="white"/>
  <path d="M26.3254 23.0963V19.8785C26.3254 18.0419 25.1082 17.1104 22.7076 17.1104C19.6657 17.1104 19.1752 18.8828 19.1051 19.6447L19.0948 19.7582H20.9825L21.0005 19.6759C21.1192 19.1289 21.3594 18.5459 22.723 18.5459C24.2603 18.5459 24.4573 19.2822 24.4573 19.9236V20.1936H22.768C20.0089 20.1936 18.6674 21.0455 18.6674 22.7974C18.6674 24.0707 19.6181 25.3558 21.7426 25.3558C23.0544 25.3558 23.9816 25.0083 24.5048 24.322C24.512 24.5714 24.5374 24.82 24.581 25.0657L24.5999 25.1462H26.3956L26.3858 25.0332C26.3704 24.8513 26.3254 23.903 26.3254 23.0963ZM20.5356 22.7072C20.5356 21.8779 21.2122 21.5241 22.7982 21.5241C23.6952 21.5241 24.204 21.5241 24.4572 21.5337V21.7043C24.4572 23.145 23.6706 23.8752 22.1195 23.8752C21.113 23.8753 20.5356 23.4497 20.5356 22.7073V22.7072Z" fill="white"/>
  <path d="M34.1918 22.5736C34.0301 22.9752 33.7422 23.3144 33.3709 23.5408C32.9996 23.7671 32.5647 23.8686 32.1307 23.8302C30.7467 23.8302 29.8528 22.8079 29.8528 21.2254C29.8528 19.652 30.7467 18.6355 32.1307 18.6355C32.5675 18.5974 33.0045 18.7056 33.3721 18.9429C33.7397 19.1802 34.0165 19.5329 34.1585 19.9447L34.1841 20.0124H36.0523L36.0334 19.8926C35.8733 18.859 34.874 17.1102 32.1455 17.1102C31.5892 17.0887 31.0343 17.1808 30.5154 17.3809C29.9964 17.581 29.5244 17.8848 29.1286 18.2735C28.7328 18.6621 28.4217 19.1274 28.2145 19.6403C28.0073 20.1532 27.9085 20.7029 27.9242 21.2553C27.9242 23.7461 29.5756 25.3555 32.1308 25.3555C34.1509 25.3555 35.6208 24.3415 36.0616 22.6433L36.0953 22.5133H34.2197L34.1918 22.5736Z" fill="white"/>
  <path d="M41.2361 17.1099C38.795 17.1099 37.09 18.8145 37.09 21.255C37.09 23.296 38.3813 25.3552 41.2662 25.3552C43.9407 25.3552 44.8943 23.8018 45.2252 22.8761L45.2749 22.7373H43.3754L43.3457 22.7909C42.9376 23.5199 42.3153 23.8451 41.3266 23.8451C40.7363 23.8688 40.1604 23.6603 39.7242 23.2648C39.2879 22.8694 39.0266 22.3189 38.9971 21.7333H45.3368V21.2101C45.3368 19.3188 44.2627 17.1099 41.2361 17.1099ZM41.2213 18.5754C42.9008 18.5754 43.3028 19.6722 43.3836 20.4026H39.0329C39.2016 19.2394 39.9933 18.5754 41.2213 18.5754V18.5754Z" fill="white"/>
  <path d="M48.7889 13.7126H46.89V25.1457H48.7889V13.7126Z" fill="white"/>
  <path d="M51.8953 13.7429C51.7046 13.7429 51.5182 13.799 51.3597 13.9042C51.2011 14.0093 51.0775 14.1588 51.0046 14.3336C50.9316 14.5085 50.9125 14.7009 50.9497 14.8865C50.9869 15.0721 51.0787 15.2427 51.2135 15.3765C51.3483 15.5103 51.5201 15.6015 51.7071 15.6384C51.8942 15.6753 52.088 15.6564 52.2642 15.5839C52.4403 15.5115 52.5909 15.3888 52.6968 15.2315C52.8028 15.0741 52.8593 14.8891 52.8593 14.6998C52.859 14.4461 52.7573 14.203 52.5766 14.0236C52.3959 13.8442 52.1509 13.7433 51.8953 13.7429V13.7429Z" fill="white"/>
  <path d="M52.8593 17.3196H50.9604V25.1456H52.8593V17.3196Z" fill="white"/>
  <path d="M64.3173 18.8148V17.3196H62.3722V14.9248H60.474V17.3196H57.4872V16.5556C57.4872 15.4766 57.7552 15.1479 58.6343 15.1479C58.839 15.1467 59.0432 15.1659 59.2441 15.205L59.3724 15.2344V13.7067L59.2947 13.6862C58.9791 13.6164 58.656 13.5851 58.3326 13.593C56.5381 13.593 55.5894 14.5966 55.5894 16.4957V17.3196H54.1865V18.8148H55.5894V25.1456H57.4873V18.8148H60.474V22.8868C60.474 24.5445 61.129 25.2206 62.7349 25.2206C63.1738 25.238 63.6127 25.1857 64.035 25.0658L64.1066 25.042V23.6414L63.9798 23.6682C63.7479 23.7088 63.5128 23.728 63.2774 23.7257C62.5833 23.7257 62.3722 23.4738 62.3722 22.6472V18.815L64.3173 18.8148Z" fill="white"/>
  <path d="M85.0313 13.3309C84.7135 15.7217 83.7448 17.1479 82.3735 17.244C81.9088 17.248 81.4495 17.1448 81.0319 16.9424C80.6143 16.7401 80.2498 16.4442 79.9671 16.078C80.9802 15.3705 81.834 14.4616 82.4744 13.4091C83.1148 12.3566 83.5278 11.1834 83.6871 9.96411C78.2026 11.5851 72.53 12.4954 66.8103 12.6724C67.4741 14.0378 68.4801 15.2111 69.732 16.0798C67.5305 18.588 66.3489 21.82 66.4172 25.1459H68.7289C68.6742 22.5575 69.5236 20.03 71.1329 17.9925C70.7869 20.3637 70.5695 22.7516 70.4817 25.1459H74.5859C74.5859 25.1459 73.8332 22.0568 75.0587 22.0541C76.2841 22.0568 75.5313 25.1459 75.5313 25.1459H79.6357C79.5544 22.884 79.3552 20.6277 79.0389 18.3862C79.4956 18.7514 80.0086 19.0413 80.5581 19.2449C81.1894 19.479 81.8637 19.5773 82.5362 19.5332C83.1422 19.4881 83.7323 19.3196 84.2697 19.0382C84.8072 18.7567 85.2805 18.3685 85.6601 17.8975C86.5236 16.8739 87.083 15.4385 87.3234 13.6311L85.0313 13.3309Z" fill="white"/>
  <path d="M75.4568 12.6078C83.6095 11.2913 89.9565 8.62502 89.6332 6.65259C89.3099 4.68017 82.4388 4.14848 74.2861 5.46504C66.1334 6.7816 59.7864 9.44784 60.1097 11.4203C60.433 13.3927 67.3041 13.9244 75.4568 12.6078Z" fill="url(#paint0_linear_1558_12595)"/>
  <path d="M82.8799 5.00777C81.9499 3.09289 80.3567 1.57417 78.3915 0.729234C76.4263 -0.1157 74.2204 -0.230408 72.177 0.406083C70.1337 1.04257 68.3893 2.38775 67.2629 4.1957C66.1364 6.00365 65.7031 8.15361 66.0421 10.2526C66.4721 12.8929 84.0988 10.1931 83.6483 7.4274C83.5107 6.58838 83.2519 5.77345 82.8799 5.00777V5.00777Z" fill="white"/>
  <path d="M91.605 24.8349V13.1858H95.6015C97.5158 13.1858 98.9935 13.687 100.035 14.6894C101.076 15.6808 101.596 17.1184 101.596 19.0021C101.596 20.8858 101.076 22.3288 100.035 23.3312C98.9935 24.3337 97.5158 24.8349 95.6015 24.8349H91.605ZM92.9819 23.6782H95.5008C98.5905 23.6782 100.135 22.1195 100.135 19.0021C100.135 15.8957 98.5905 14.3424 95.5008 14.3424H92.9819V23.6782Z" fill="white"/>
  <path d="M107.275 24.9836C106.48 24.9836 105.792 24.8129 105.21 24.4714C104.628 24.1299 104.174 23.6507 103.85 23.0338C103.536 22.4059 103.379 21.6679 103.379 20.8197C103.379 19.9715 103.536 19.2389 103.85 18.622C104.174 17.9941 104.628 17.5095 105.21 17.168C105.792 16.8265 106.48 16.6557 107.275 16.6557C108.059 16.6557 108.742 16.8265 109.324 17.168C109.917 17.5095 110.371 17.9941 110.684 18.622C111.009 19.2389 111.171 19.9715 111.171 20.8197C111.171 21.6679 111.009 22.4059 110.684 23.0338C110.371 23.6507 109.917 24.1299 109.324 24.4714C108.742 24.8129 108.059 24.9836 107.275 24.9836ZM107.275 23.9096C108.036 23.9096 108.647 23.6452 109.106 23.1164C109.564 22.5767 109.794 21.8111 109.794 20.8197C109.794 19.8172 109.564 19.0517 109.106 18.5229C108.647 17.9941 108.036 17.7298 107.275 17.7298C106.503 17.7298 105.887 17.9941 105.428 18.5229C104.98 19.0517 104.756 19.8172 104.756 20.8197C104.756 21.8111 104.98 22.5767 105.428 23.1164C105.887 23.6452 106.503 23.9096 107.275 23.9096Z" fill="white"/>
  <path d="M116.673 24.9836C115.856 24.9836 115.151 24.8129 114.557 24.4714C113.964 24.1189 113.505 23.6287 113.18 23.0008C112.867 22.3619 112.71 21.6183 112.71 20.7701C112.71 19.4923 113.063 18.4899 113.768 17.7628C114.473 17.0248 115.442 16.6557 116.673 16.6557C117.177 16.6557 117.675 16.7439 118.168 16.9201C118.66 17.0964 119.069 17.3442 119.393 17.6637L118.923 18.6386C118.599 18.3301 118.24 18.1043 117.849 17.9611C117.468 17.8179 117.104 17.7463 116.757 17.7463C115.906 17.7463 115.251 18.0107 114.792 18.5394C114.333 19.0572 114.104 19.8062 114.104 20.7866C114.104 21.745 114.333 22.5051 114.792 23.0669C115.251 23.6177 115.906 23.8931 116.757 23.8931C117.104 23.8931 117.468 23.8214 117.849 23.6782C118.24 23.535 118.599 23.3037 118.923 22.9843L119.393 23.9591C119.069 24.2786 118.655 24.532 118.151 24.7192C117.658 24.8955 117.166 24.9836 116.673 24.9836Z" fill="white"/>
  <path d="M123.741 24.9836C123.103 24.9836 122.498 24.8955 121.927 24.7192C121.356 24.543 120.886 24.2951 120.517 23.9757L120.953 23.0338C121.356 23.3533 121.798 23.5901 122.28 23.7443C122.772 23.8875 123.271 23.9591 123.774 23.9591C124.412 23.9591 124.894 23.8435 125.218 23.6122C125.543 23.3808 125.705 23.0669 125.705 22.6703C125.705 22.3619 125.599 22.1195 125.386 21.9433C125.174 21.756 124.838 21.6128 124.379 21.5137L122.851 21.1832C121.463 20.8858 120.769 20.1808 120.769 19.0682C120.769 18.3411 121.06 17.7573 121.642 17.3167C122.235 16.8761 123.007 16.6557 123.959 16.6557C124.519 16.6557 125.051 16.7439 125.554 16.9201C126.069 17.0853 126.495 17.3332 126.831 17.6637L126.377 18.6055C126.052 18.3081 125.672 18.0823 125.235 17.9281C124.81 17.7628 124.384 17.6802 123.959 17.6802C123.332 17.6802 122.856 17.8014 122.532 18.0437C122.207 18.2861 122.045 18.6055 122.045 19.0021C122.045 19.619 122.459 20.0155 123.287 20.1918L124.815 20.5057C125.532 20.6599 126.075 20.9078 126.444 21.2493C126.814 21.5798 126.998 22.0314 126.998 22.6042C126.998 23.3423 126.702 23.9261 126.108 24.3557C125.515 24.7743 124.726 24.9836 123.741 24.9836Z" fill="white"/>
  </g>
  <defs>
  <linearGradient id="paint0_linear_1558_12595" x1="60.0978" y1="9.0365" x2="89.645" y2="9.0365" gradientUnits="userSpaceOnUse">
  <stop offset="0.0817" stop-color="#82FFE8"/>
  <stop offset="0.9512" stop-color="#7C47FC"/>
  </linearGradient>
  <clipPath id="clip0_1558_12595">
  <rect width="127" height="29" fill="white"/>
  </clipPath>
  </defs>
  </svg>
    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Spacelift Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Kubernetes Workers
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="spacelift" data-md-color-primary="" data-md-color-accent=""  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="deep-purple" data-md-color-accent=""  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    <div class="header__links">
      <a href="https://spacelift.io" class="header__link" target="_blank" rel='noreferrer'>
        spacelift.io
        <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="header__link-icon">
          <g clip-path="url(#clip0_1505_28312)">
          <path fill-rule="evenodd" clip-rule="evenodd" d="M8.76562 1.33339C8.76562 1.02043 9.01933 0.766724 9.33229 0.766724H14.6656C14.9786 0.766724 15.2323 1.02043 15.2323 1.33339V6.66672C15.2323 6.97969 14.9786 7.23339 14.6656 7.23339C14.3527 7.23339 14.099 6.97969 14.099 6.66672V2.70144L7.73299 9.06742C7.51169 9.28872 7.15289 9.28872 6.9316 9.06742C6.7103 8.84612 6.7103 8.48733 6.9316 8.26603L13.2976 1.90006H9.33229C9.01933 1.90006 8.76562 1.64635 8.76562 1.33339ZM1.26354 3.26464C1.58236 2.94583 2.01476 2.76672 2.46563 2.76672H5.29896C5.61192 2.76672 5.86563 3.02043 5.86563 3.33339C5.86563 3.64635 5.61192 3.90006 5.29896 3.90006H2.46563C2.31534 3.90006 2.1712 3.95976 2.06493 4.06603C1.95866 4.1723 1.89896 4.31643 1.89896 4.46672V13.5334C1.89896 13.6837 1.95866 13.8278 2.06493 13.9341C2.1712 14.0404 2.31534 14.1001 2.46563 14.1001H11.5323C11.6826 14.1001 11.8267 14.0404 11.933 13.9341C12.0393 13.8278 12.099 13.6837 12.099 13.5334V10.7001C12.099 10.3871 12.3527 10.1334 12.6656 10.1334C12.9786 10.1334 13.2323 10.3871 13.2323 10.7001V13.5334C13.2323 13.9843 13.0532 14.4167 12.7344 14.7355C12.4156 15.0543 11.9832 15.2334 11.5323 15.2334H2.46563C2.01476 15.2334 1.58235 15.0543 1.26354 14.7355C0.944732 14.4167 0.765625 13.9843 0.765625 13.5334V4.46672C0.765625 4.01586 0.944732 3.58345 1.26354 3.26464Z" fill="currentColor"/>
          </g>
          <defs>
          <clipPath id="clip0_1505_28312">
          <rect width="16" height="16" fill="currentColor"/>
          </clipPath>
          </defs>
        </svg>
      </a>
      <a href="https://spacelift.io/login" class="header__link" target="_blank" rel='noreferrer'>
        Login
      </a>
      <a href="https://spacelift.io/schedule-demo" class="header__button header__button--outlined" target="_blank" rel='noreferrer'>Book a demo</a>
      <a href="https://spacelift.io/free-trial" class="header__button header__button--contained" target="_blank" rel='noreferrer'>Start for free</a>
    </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Spacelift Documentation" class="md-nav__button md-logo" aria-label="Spacelift Documentation" data-md-component="logo">
      
  <img src="../../assets/images/logo-selfhosted.svg" alt="logo">

    </a>
    Spacelift Documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../index.html" class="md-nav__link">
        Getting Started with Spacelift
      </a>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
      
      
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
          🔧 Installing Spacelift
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          🔧 Installing Spacelift
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../installing-spacelift/install-methods.html" class="md-nav__link">
        Install Methods
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../installing-spacelift/changelog.html" class="md-nav__link">
        Changelog
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" >
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../installing-spacelift/reference-architecture.html">Reference Architecture</a>
          
            <label for="__nav_2_3">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_3">
          <span class="md-nav__icon md-icon"></span>
          Reference Architecture
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../installing-spacelift/reference-architecture/external-dependencies.html" class="md-nav__link">
        External Dependencies
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../installing-spacelift/reference-architecture/environment-requirements.html" class="md-nav__link">
        Environment Requirements
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_4" >
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../installing-spacelift/reference-architecture/guides.html">Guides</a>
          
            <label for="__nav_2_3_4">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_3_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_3_4">
          <span class="md-nav__icon md-icon"></span>
          Guides
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../installing-spacelift/reference-architecture/guides/deploying-to-aks.html" class="md-nav__link">
        Deploying to AKS
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../installing-spacelift/reference-architecture/guides/deploying-to-ecs.html" class="md-nav__link">
        Deploying to ECS
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../installing-spacelift/reference-architecture/guides/deploying-to-eks.html" class="md-nav__link">
        Deploying to EKS
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../installing-spacelift/reference-architecture/guides/deploying-to-gke.html" class="md-nav__link">
        Deploying to GKE
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../installing-spacelift/reference-architecture/guides/deploying-to-onprem.html" class="md-nav__link">
        Deploying to an on-prem Kubernetes cluster
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../installing-spacelift/reference-architecture/guides/first-setup.html" class="md-nav__link">
        First setup
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../installing-spacelift/reference-architecture/guides/observability.html" class="md-nav__link">
        Observability
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../installing-spacelift/reference-architecture/guides/air-gapped.html" class="md-nav__link">
        Deploying to air-gapped environments
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../installing-spacelift/reference-architecture/guides/disaster-recovery.html" class="md-nav__link">
        Disaster recovery
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_5" >
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../installing-spacelift/reference-architecture/reference.html">Reference</a>
          
            <label for="__nav_2_3_5">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_3_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_3_5">
          <span class="md-nav__icon md-icon"></span>
          Reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../installing-spacelift/reference-architecture/reference/general-configuration.html" class="md-nav__link">
        General configuration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../installing-spacelift/reference-architecture/reference/encryption.html" class="md-nav__link">
        Encryption
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../installing-spacelift/reference-architecture/reference/message-queues.html" class="md-nav__link">
        Message queues
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../installing-spacelift/reference-architecture/reference/mqtt-broker.html" class="md-nav__link">
        MQTT Broker
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../installing-spacelift/reference-architecture/reference/networking.html" class="md-nav__link">
        Networking
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../installing-spacelift/reference-architecture/reference/object-storage.html" class="md-nav__link">
        Object storage
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../installing-spacelift/reference-architecture/reference/slack.html" class="md-nav__link">
        Slack
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../installing-spacelift/reference-architecture/reference/telemetry.html" class="md-nav__link">
        Telemetry
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../installing-spacelift/reference-architecture/reference/usage-reporting.html" class="md-nav__link">
        Usage reporting
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4" >
      
      
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
          CloudFormation
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_4">
          <span class="md-nav__icon md-icon"></span>
          CloudFormation
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../installing-spacelift/cloudformation/install.html" class="md-nav__link">
        Installation Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../installing-spacelift/cloudformation/advanced-installations.html" class="md-nav__link">
        Advanced Installations
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../installing-spacelift/cloudformation/disaster-recovery.html" class="md-nav__link">
        Disaster Recovery
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../installing-spacelift/cloudformation/slack-integration-setup.html" class="md-nav__link">
        Slack integration setup
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../installing-spacelift/cloudformation/cloudformation-to-opentofu-terraform-migration.html" class="md-nav__link">
        CloudFormation to OpenTofu/Terraform migration
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../index.html">🚀 Getting Started</a>
          
            <label for="__nav_3">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          🚀 Getting Started
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../getting-started/integrate-source-code.html">Step 1. Integrate source code</a>
          
            <label for="__nav_3_2">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_2">
          <span class="md-nav__icon md-icon"></span>
          Step 1. Integrate source code
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/integrate-source-code/GitHub.html" class="md-nav__link">
        GitHub
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/integrate-source-code/GitLab.html" class="md-nav__link">
        GitLab
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/integrate-source-code/Bitbucket-Cloud.html" class="md-nav__link">
        Bitbucket Cloud
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/integrate-source-code/Bitbucket-DataCenter.html" class="md-nav__link">
        Bitbucket Data Center
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/integrate-source-code/Azure-DevOps.html" class="md-nav__link">
        Azure DevOps
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3" >
      
      
        
          
            
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../getting-started/integrate-cloud.html">Step 2. Connect cloud account</a>
          
            <label for="__nav_3_3">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_3">
          <span class="md-nav__icon md-icon"></span>
          Step 2. Connect cloud account
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/integrate-cloud/AWS.html" class="md-nav__link">
        Amazon Web Services
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4" >
      
      
        
          
            
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../getting-started/create-stack.html">Step 3. Create a stack</a>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_4">
          <span class="md-nav__icon md-icon"></span>
          Step 3. Create a stack
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_5" >
      
      
        
          
            
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../getting-started/invite-teammates.html">Step 4. Invite teammates</a>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_5">
          <span class="md-nav__icon md-icon"></span>
          Step 4. Invite teammates
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../faq.html" class="md-nav__link">
        ✋ FAQ
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
          ⭐ Main Concepts
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          ⭐ Main Concepts
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_1" >
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../stack.html">Stack</a>
          
            <label for="__nav_5_1">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5_1">
          <span class="md-nav__icon md-icon"></span>
          Stack
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../stack/creating-a-stack.html" class="md-nav__link">
        Create, delete, and lock stacks
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../stack/stack-settings.html" class="md-nav__link">
        Stack settings
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../stack/organizing-stacks.html" class="md-nav__link">
        Organize stacks
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../stack/stack-dependencies.html" class="md-nav__link">
        Stack dependencies
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../stack/drift-detection.html" class="md-nav__link">
        Drift detection
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../stack/scheduling.html" class="md-nav__link">
        Scheduling stack actions
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_2" >
      
      
        
          
            
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../blueprint.html">Blueprint</a>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5_2">
          <span class="md-nav__icon md-icon"></span>
          Blueprint
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_3" >
      
      
        
          
            
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../configuration.html">Configuration</a>
          
            <label for="__nav_5_3">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5_3">
          <span class="md-nav__icon md-icon"></span>
          Configuration
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../configuration/environment.html" class="md-nav__link">
        Environment
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../configuration/context.html" class="md-nav__link">
        Context
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_3_4" >
      
      
        
          
            
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../configuration/runtime-configuration.html">Runtime Configuration</a>
          
            <label for="__nav_5_3_4">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_3_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5_3_4">
          <span class="md-nav__icon md-icon"></span>
          Runtime Configuration
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../configuration/runtime-configuration/runtime-yaml-reference.html" class="md-nav__link">
        YAML reference
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_4" >
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../run.html">Run</a>
          
            <label for="__nav_5_4">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5_4">
          <span class="md-nav__icon md-icon"></span>
          Run
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../run/task.html" class="md-nav__link">
        Task
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../run/proposed.html" class="md-nav__link">
        Proposed run (preview)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../run/tracked.html" class="md-nav__link">
        Tracked run (deployment)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../run/test-case.html" class="md-nav__link">
        Module test case
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../run/user-provided-metadata.html" class="md-nav__link">
        User-Provided Metadata
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../run/run-promotion.html" class="md-nav__link">
        Run Promotion
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../run/pull-request-comments.html" class="md-nav__link">
        Pull Request Comments
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../run/ai.html" class="md-nav__link">
        AI
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_5" >
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../policy.html">Policy</a>
          
            <label for="__nav_5_5">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5_5">
          <span class="md-nav__icon md-icon"></span>
          Policy
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../policy/login-policy.html" class="md-nav__link">
        Login policy
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../policy/stack-access-policy.html" class="md-nav__link">
        Access policy
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../policy/approval-policy.html" class="md-nav__link">
        Approval policy
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../policy/run-initialization-policy.html" class="md-nav__link">
        Initialization policy
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../policy/notification-policy.html" class="md-nav__link">
        Notification policy
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../policy/terraform-plan-policy.html" class="md-nav__link">
        Plan policy
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_5_8" >
      
      
        
          
            
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../policy/push-policy.html">Push Policy</a>
          
            <label for="__nav_5_5_8">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_5_8_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5_5_8">
          <span class="md-nav__icon md-icon"></span>
          Push Policy
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../policy/push-policy/run-external-dependencies.html" class="md-nav__link">
        External Dependencies
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../policy/task-run-policy.html" class="md-nav__link">
        Task policy
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../policy/trigger-policy.html" class="md-nav__link">
        Trigger policy
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_6" >
      
      
        
          
            
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../resources.html">Resources</a>
          
            <label for="__nav_5_6">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_6_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5_6">
          <span class="md-nav__icon md-icon"></span>
          Resources
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../resources/configuration-management.html" class="md-nav__link">
        Configuration Management
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_7" checked>
      
      
        
          
            
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../worker-pools.html">Worker pools</a>
          
            <label for="__nav_5_7">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_7_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_5_7">
          <span class="md-nav__icon md-icon"></span>
          Worker pools
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="docker-based-workers.html" class="md-nav__link">
        Docker-based Workers
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Kubernetes Workers
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="kubernetes-workers.html" class="md-nav__link md-nav__link--active">
        Kubernetes Workers
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#kubernetes-version-compatibility" class="md-nav__link">
    Kubernetes version compatibility
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installation" class="md-nav__link">
    Installation
  </a>
  
    <nav class="md-nav" aria-label="Installation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#controller-setup" class="md-nav__link">
    Controller setup
  </a>
  
    <nav class="md-nav" aria-label="Controller setup">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#openshift" class="md-nav__link">
    OpenShift
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-a-secret" class="md-nav__link">
    Create a Secret
  </a>
  
    <nav class="md-nav" aria-label="Create a Secret">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mac" class="md-nav__link">
    Mac
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#linux" class="md-nav__link">
    Linux
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-a-workerpool" class="md-nav__link">
    Create a WorkerPool
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#grant-access-to-the-launcher-image" class="md-nav__link">
    Grant access to the Launcher image
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#upgrade" class="md-nav__link">
    Upgrade
  </a>
  
    <nav class="md-nav" aria-label="Upgrade">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#upgrading-to-controller-v0017-or-helm-chart-v0330" class="md-nav__link">
    Upgrading to controller v0.0.17 - or Helm chart v0.33.0
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#run-containers" class="md-nav__link">
    Run Containers
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resource-usage" class="md-nav__link">
    Resource Usage
  </a>
  
    <nav class="md-nav" aria-label="Resource Usage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kubernetes-controller" class="md-nav__link">
    Kubernetes Controller
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#run-pods" class="md-nav__link">
    Run Pods
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#volumes" class="md-nav__link">
    Volumes
  </a>
  
    <nav class="md-nav" aria-label="Volumes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#workspace-volume" class="md-nav__link">
    Workspace Volume
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#binaries-cache-volume" class="md-nav__link">
    Binaries Cache Volume
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#custom-volumes" class="md-nav__link">
    Custom Volumes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration" class="md-nav__link">
    Configuration
  </a>
  
    <nav class="md-nav" aria-label="Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pod-history-management" class="md-nav__link">
    Pod History Management
  </a>
  
    <nav class="md-nav" aria-label="Pod History Management">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    Overview
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#default-behavior" class="md-nav__link">
    Default Behavior
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuration-options" class="md-nav__link">
    Configuration Options
  </a>
  
    <nav class="md-nav" aria-label="Configuration Options">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#count-based-limits" class="md-nav__link">
    Count-Based Limits
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#time-based-cleanup-ttl" class="md-nav__link">
    Time-Based Cleanup (TTL)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#special-modes" class="md-nav__link">
    Special Modes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#behavior-details" class="md-nav__link">
    Behavior Details
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configure-a-docker-daemon-as-a-sidecar-container" class="md-nav__link">
    Configure a docker daemon as a sidecar container
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#timeouts" class="md-nav__link">
    Timeouts
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#network-configuration" class="md-nav__link">
    Network Configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#initialization-policies" class="md-nav__link">
    Initialization Policies
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-vcs-agents-with-kubernetes-workers" class="md-nav__link">
    Using VCS Agents with Kubernetes Workers
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#controller-metrics" class="md-nav__link">
    Controller metrics
  </a>
  
    <nav class="md-nav" aria-label="Controller metrics">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#helm" class="md-nav__link">
    Helm
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#custom-binaries-path" class="md-nav__link">
    Custom binaries path
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#autoscaling" class="md-nav__link">
    Autoscaling
  </a>
  
    <nav class="md-nav" aria-label="Autoscaling">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#eks" class="md-nav__link">
    EKS
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gke" class="md-nav__link">
    GKE
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aks" class="md-nav__link">
    AKS
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fips" class="md-nav__link">
    FIPS
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#scaling-a-pool" class="md-nav__link">
    Scaling a pool
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#billing-for-kubernetes-workers" class="md-nav__link">
    Billing for Kubernetes Workers
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#migrating-from-docker-in-docker" class="md-nav__link">
    Migrating from Docker-in-Docker
  </a>
  
    <nav class="md-nav" aria-label="Migrating from Docker-in-Docker">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#why-migrate" class="md-nav__link">
    Why migrate
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deploying-workers" class="md-nav__link">
    Deploying workers
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing-both-alongside-each-other" class="md-nav__link">
    Testing both alongside each other
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#customizing-timeouts" class="md-nav__link">
    Customizing timeouts
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#storage-configuration" class="md-nav__link">
    Storage configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pool-size" class="md-nav__link">
    Pool size
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshooting" class="md-nav__link">
    Troubleshooting
  </a>
  
    <nav class="md-nav" aria-label="Troubleshooting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#listing-workerpools-and-workers" class="md-nav__link">
    Listing WorkerPools and Workers
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#listing-run-pods" class="md-nav__link">
    Listing run pods
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#workers-not-connecting-to-spacelift" class="md-nav__link">
    Workers not connecting to Spacelift
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#run-not-starting" class="md-nav__link">
    Run not starting
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#getting-help-with-run-issues" class="md-nav__link">
    Getting help with run issues
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#custom-runner-images" class="md-nav__link">
    Custom runner images
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#networking-issues-caused-by-pod-identity" class="md-nav__link">
    Networking issues caused by Pod identity
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../spacectl.html" class="md-nav__link">
        spacectl, the Spacelift CLI
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_9" >
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../spaces.html">Spaces</a>
          
            <label for="__nav_5_9">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_9_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5_9">
          <span class="md-nav__icon md-icon"></span>
          Spaces
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../spaces/access-control.html" class="md-nav__link">
        Access control
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../spaces/creating-a-space.html" class="md-nav__link">
        Creating a Space
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../spaces/moving-a-space-or-an-entity.html" class="md-nav__link">
        Moving a Space or any Entity
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../spaces/deleting-a-space.html" class="md-nav__link">
        Deleting a Space
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../spaces/structuring-your-spaces-tree.html" class="md-nav__link">
        Structuring your Spaces Tree
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../spaces/migrating-out-of-the-legacy-space.html" class="md-nav__link">
        Migrating out of the Legacy Space
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../spaces/best-practices.html" class="md-nav__link">
        Spaces Best Practices
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_10" >
      
      
        
          
            
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../user-management.html">User Management</a>
          
            <label for="__nav_5_10">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_10_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5_10">
          <span class="md-nav__icon md-icon"></span>
          User Management
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../user-management/admin.html" class="md-nav__link">
        Admin / Owner
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../user-management/user.html" class="md-nav__link">
        User
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../vcs-agent-pools.html" class="md-nav__link">
        VCS Agent Pools
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
          🛰️ Platforms
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          🛰️ Platforms
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1" >
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../vendors/terraform.html">Terraform</a>
          
            <label for="__nav_6_1">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_6_1">
          <span class="md-nav__icon md-icon"></span>
          Terraform
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../vendors/terraform/module-registry.html" class="md-nav__link">
        Module registry
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../vendors/terraform/provider-registry.html" class="md-nav__link">
        Provider registry
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../vendors/terraform/external-modules.html" class="md-nav__link">
        External modules
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../vendors/terraform/terraform-provider.html" class="md-nav__link">
        Provider
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../vendors/terraform/state-management.html" class="md-nav__link">
        State management
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../vendors/terraform/external-state-access.html" class="md-nav__link">
        External state access
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../vendors/terraform/terragrunt.html" class="md-nav__link">
        Terragrunt
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../vendors/terraform/version-management.html" class="md-nav__link">
        Version management
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../vendors/terraform/handling-tfvars.html" class="md-nav__link">
        Handling .tfvars
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../vendors/terraform/cli-configuration.html" class="md-nav__link">
        CLI Configuration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../vendors/terraform/infracost.html" class="md-nav__link">
        Cost Estimation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../vendors/terraform/resource-sanitization.html" class="md-nav__link">
        Resource Sanitization
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../vendors/terraform/storing-complex-variables.html" class="md-nav__link">
        Storing Complex Variables
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../vendors/terraform/debugging-guide.html" class="md-nav__link">
        Debugging Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../vendors/terraform/dependency-lock-file.html" class="md-nav__link">
        Dependency Lock File
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../vendors/terraform/cdktf.html" class="md-nav__link">
        Cloud Development Kit for Terraform (CDKTF)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../vendors/terraform/workflow-tool.html" class="md-nav__link">
        Workflow Tool
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_2" >
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../vendors/terragrunt.html">Terragrunt</a>
          
            <label for="__nav_6_2">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_6_2">
          <span class="md-nav__icon md-icon"></span>
          Terragrunt
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../vendors/terragrunt/getting-started.html" class="md-nav__link">
        Getting Started
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../vendors/terragrunt/run-all.html" class="md-nav__link">
        Using Run-All
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../vendors/terragrunt/limitations.html" class="md-nav__link">
        Limitations
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../vendors/terragrunt/terragrunt-tool.html" class="md-nav__link">
        Terragrunt Tool
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../vendors/terragrunt/reference.html" class="md-nav__link">
        Reference
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_3" >
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../vendors/pulumi.html">Pulumi</a>
          
            <label for="__nav_6_3">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_6_3">
          <span class="md-nav__icon md-icon"></span>
          Pulumi
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../vendors/pulumi/c-sharp.html" class="md-nav__link">
        C#
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../vendors/pulumi/golang.html" class="md-nav__link">
        Go
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../vendors/pulumi/javascript.html" class="md-nav__link">
        Javascript
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../vendors/pulumi/python.html" class="md-nav__link">
        Python
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_4" >
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../vendors/cloudformation.html">AWS CloudFormation</a>
          
            <label for="__nav_6_4">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_6_4">
          <span class="md-nav__icon md-icon"></span>
          AWS CloudFormation
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../vendors/cloudformation/getting-started.html" class="md-nav__link">
        Getting Started
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../vendors/cloudformation/reference.html" class="md-nav__link">
        Reference
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../vendors/cloudformation/integrating-with-sam.html" class="md-nav__link">
        Integrating with AWS Serverless Application Model (SAM)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../vendors/cloudformation/integrating-with-the-serverless-framework.html" class="md-nav__link">
        Integrating with the Serverless Framework
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../vendors/cloudformation/integrating-with-cdk.html" class="md-nav__link">
        Integrating with AWS Cloud Development Kit (CDK)
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_5" >
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../vendors/kubernetes.html">Kubernetes</a>
          
            <label for="__nav_6_5">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_6_5">
          <span class="md-nav__icon md-icon"></span>
          Kubernetes
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../vendors/kubernetes/getting-started.html" class="md-nav__link">
        Getting Started
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../vendors/kubernetes/authenticating.html" class="md-nav__link">
        Authenticating
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../vendors/kubernetes/custom-resources.html" class="md-nav__link">
        Custom Resources
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../vendors/kubernetes/helm.html" class="md-nav__link">
        Helm
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../vendors/kubernetes/kustomize.html" class="md-nav__link">
        Kustomize
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../vendors/kubernetes/workflow-tool.html" class="md-nav__link">
        Workflow Tool
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_6" >
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../vendors/ansible.html">Ansible</a>
          
            <label for="__nav_6_6">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_6_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_6_6">
          <span class="md-nav__icon md-icon"></span>
          Ansible
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../vendors/ansible/getting-started.html" class="md-nav__link">
        Getting Started
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../vendors/ansible/reference.html" class="md-nav__link">
        Reference
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../vendors/ansible/policies.html" class="md-nav__link">
        Spacelift Policies with Ansible
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../vendors/ansible/ansible-galaxy.html" class="md-nav__link">
        Ansible Galaxy
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
          ⚙️ Integrations
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          ⚙️ Integrations
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integrations/audit-trail.html" class="md-nav__link">
        Audit trail
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_2" >
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_7_2" id="__nav_7_2_label" tabindex="0">
          ChatOps
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_7_2">
          <span class="md-nav__icon md-icon"></span>
          ChatOps
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integrations/chatops/slack.html" class="md-nav__link">
        Slack
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integrations/chatops/msteams.html" class="md-nav__link">
        Microsoft Teams
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_3" >
      
      
        
          
            
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../integrations/cloud-providers.html">Cloud Integrations</a>
          
            <label for="__nav_7_3">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_7_3">
          <span class="md-nav__icon md-icon"></span>
          Cloud Integrations
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integrations/cloud-providers/aws.html" class="md-nav__link">
        Amazon Web Services (AWS)
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_3_3" >
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../integrations/cloud-providers/oidc.html">OpenID Connect (OIDC)</a>
          
            <label for="__nav_7_3_3">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_7_3_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_7_3_3">
          <span class="md-nav__icon md-icon"></span>
          OpenID Connect (OIDC)
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integrations/cloud-providers/oidc/aws-oidc.html" class="md-nav__link">
        Amazon Web Services (AWS)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integrations/cloud-providers/oidc/gcp-oidc.html" class="md-nav__link">
        Google Cloud Platform (GCP)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integrations/cloud-providers/oidc/azure-oidc.html" class="md-nav__link">
        Microsoft Azure
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integrations/cloud-providers/oidc/vault-oidc.html" class="md-nav__link">
        HashiCorp Vault
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_4" >
      
      
        
          
            
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../integrations/observability.html">Observability</a>
          
            <label for="__nav_7_4">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_7_4">
          <span class="md-nav__icon md-icon"></span>
          Observability
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integrations/observability/datadog.html" class="md-nav__link">
        Datadog integration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integrations/observability/prometheus.html" class="md-nav__link">
        Prometheus integration
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_5" >
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../integrations/source-control.html">Source Control</a>
          
            <label for="__nav_7_5">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_7_5">
          <span class="md-nav__icon md-icon"></span>
          Source Control
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integrations/source-control/github.html" class="md-nav__link">
        GitHub
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integrations/source-control/gitlab.html" class="md-nav__link">
        GitLab
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integrations/source-control/azure-devops.html" class="md-nav__link">
        Azure DevOps
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integrations/source-control/bitbucket-cloud.html" class="md-nav__link">
        Bitbucket Cloud
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integrations/source-control/bitbucket-datacenter-server.html" class="md-nav__link">
        Bitbucket Datacenter/Server
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integrations/source-control/raw-git.html" class="md-nav__link">
        Raw Git
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integrations/docker.html" class="md-nav__link">
        Docker
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_7" >
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_7_7" id="__nav_7_7_label" tabindex="0">
          API
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_7_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_7_7">
          <span class="md-nav__icon md-icon"></span>
          API
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integrations/api.html" class="md-nav__link">
        GraphQL API
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integrations/api-development-with-mcp.html" class="md-nav__link">
        Spacelift API integration via spacectl MCP server
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integrations/webhooks.html" class="md-nav__link">
        Webhooks
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integrations/teleport.html" class="md-nav__link">
        Teleport
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_10" >
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_7_10" id="__nav_7_10_label" tabindex="0">
          External Integrations
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_10_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_7_10">
          <span class="md-nav__icon md-icon"></span>
          External Integrations
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integrations/external-integrations/backstage.html" class="md-nav__link">
        Backstage
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integrations/external-integrations/servicenow.html" class="md-nav__link">
        ServiceNow
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
          📖 Product
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          📖 Product
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../product/notifications.html" class="md-nav__link">
        Notifications
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_2" >
      
      
        
          
            
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../product/security.html">Security</a>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_8_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_8_2">
          <span class="md-nav__icon md-icon"></span>
          Security
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../product/migrating-to-spacelift.html" class="md-nav__link">
        Migrating to Spacelift
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../product/bulk-actions.html" class="md-nav__link">
        Bulk actions
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_5" >
      
      
        
          
            
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../product/support.html">Support</a>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_8_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_8_5">
          <span class="md-nav__icon md-icon"></span>
          Support
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../product/disaster-continuity.html" class="md-nav__link">
        Disaster Continuity
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../product/onboarding-best-practices.html" class="md-nav__link">
        Onboarding Best Practices
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_8" >
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_8_8" id="__nav_8_8_label" tabindex="0">
          Archive
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_8_8_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_8_8">
          <span class="md-nav__icon md-icon"></span>
          Archive
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../product/archive/support.html" class="md-nav__link">
        Support
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" >
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
          ⚖️ Legal
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_9">
          <span class="md-nav__icon md-icon"></span>
          ⚖️ Legal
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../legal/terms.html" class="md-nav__link">
        Terms and Conditions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../legal/refund-policy.html" class="md-nav__link">
        Refund Policy
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../legal/privacy.html" class="md-nav__link">
        Privacy
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../legal/cookie-policy.html" class="md-nav__link">
        Cookie Policy
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../legal/dpa.html" class="md-nav__link">
        Data Processing Agreement
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_6" >
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_9_6" id="__nav_9_6_label" tabindex="0">
          Archive
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_6_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_9_6">
          <span class="md-nav__icon md-icon"></span>
          Archive
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../legal/archive/terms.html" class="md-nav__link">
        Terms and Conditions
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#kubernetes-version-compatibility" class="md-nav__link">
    Kubernetes version compatibility
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installation" class="md-nav__link">
    Installation
  </a>
  
    <nav class="md-nav" aria-label="Installation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#controller-setup" class="md-nav__link">
    Controller setup
  </a>
  
    <nav class="md-nav" aria-label="Controller setup">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#openshift" class="md-nav__link">
    OpenShift
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-a-secret" class="md-nav__link">
    Create a Secret
  </a>
  
    <nav class="md-nav" aria-label="Create a Secret">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mac" class="md-nav__link">
    Mac
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#linux" class="md-nav__link">
    Linux
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-a-workerpool" class="md-nav__link">
    Create a WorkerPool
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#grant-access-to-the-launcher-image" class="md-nav__link">
    Grant access to the Launcher image
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#upgrade" class="md-nav__link">
    Upgrade
  </a>
  
    <nav class="md-nav" aria-label="Upgrade">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#upgrading-to-controller-v0017-or-helm-chart-v0330" class="md-nav__link">
    Upgrading to controller v0.0.17 - or Helm chart v0.33.0
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#run-containers" class="md-nav__link">
    Run Containers
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resource-usage" class="md-nav__link">
    Resource Usage
  </a>
  
    <nav class="md-nav" aria-label="Resource Usage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kubernetes-controller" class="md-nav__link">
    Kubernetes Controller
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#run-pods" class="md-nav__link">
    Run Pods
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#volumes" class="md-nav__link">
    Volumes
  </a>
  
    <nav class="md-nav" aria-label="Volumes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#workspace-volume" class="md-nav__link">
    Workspace Volume
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#binaries-cache-volume" class="md-nav__link">
    Binaries Cache Volume
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#custom-volumes" class="md-nav__link">
    Custom Volumes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration" class="md-nav__link">
    Configuration
  </a>
  
    <nav class="md-nav" aria-label="Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pod-history-management" class="md-nav__link">
    Pod History Management
  </a>
  
    <nav class="md-nav" aria-label="Pod History Management">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    Overview
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#default-behavior" class="md-nav__link">
    Default Behavior
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuration-options" class="md-nav__link">
    Configuration Options
  </a>
  
    <nav class="md-nav" aria-label="Configuration Options">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#count-based-limits" class="md-nav__link">
    Count-Based Limits
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#time-based-cleanup-ttl" class="md-nav__link">
    Time-Based Cleanup (TTL)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#special-modes" class="md-nav__link">
    Special Modes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#behavior-details" class="md-nav__link">
    Behavior Details
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configure-a-docker-daemon-as-a-sidecar-container" class="md-nav__link">
    Configure a docker daemon as a sidecar container
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#timeouts" class="md-nav__link">
    Timeouts
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#network-configuration" class="md-nav__link">
    Network Configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#initialization-policies" class="md-nav__link">
    Initialization Policies
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-vcs-agents-with-kubernetes-workers" class="md-nav__link">
    Using VCS Agents with Kubernetes Workers
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#controller-metrics" class="md-nav__link">
    Controller metrics
  </a>
  
    <nav class="md-nav" aria-label="Controller metrics">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#helm" class="md-nav__link">
    Helm
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#custom-binaries-path" class="md-nav__link">
    Custom binaries path
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#autoscaling" class="md-nav__link">
    Autoscaling
  </a>
  
    <nav class="md-nav" aria-label="Autoscaling">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#eks" class="md-nav__link">
    EKS
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gke" class="md-nav__link">
    GKE
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aks" class="md-nav__link">
    AKS
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fips" class="md-nav__link">
    FIPS
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#scaling-a-pool" class="md-nav__link">
    Scaling a pool
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#billing-for-kubernetes-workers" class="md-nav__link">
    Billing for Kubernetes Workers
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#migrating-from-docker-in-docker" class="md-nav__link">
    Migrating from Docker-in-Docker
  </a>
  
    <nav class="md-nav" aria-label="Migrating from Docker-in-Docker">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#why-migrate" class="md-nav__link">
    Why migrate
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deploying-workers" class="md-nav__link">
    Deploying workers
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing-both-alongside-each-other" class="md-nav__link">
    Testing both alongside each other
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#customizing-timeouts" class="md-nav__link">
    Customizing timeouts
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#storage-configuration" class="md-nav__link">
    Storage configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pool-size" class="md-nav__link">
    Pool size
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshooting" class="md-nav__link">
    Troubleshooting
  </a>
  
    <nav class="md-nav" aria-label="Troubleshooting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#listing-workerpools-and-workers" class="md-nav__link">
    Listing WorkerPools and Workers
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#listing-run-pods" class="md-nav__link">
    Listing run pods
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#workers-not-connecting-to-spacelift" class="md-nav__link">
    Workers not connecting to Spacelift
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#run-not-starting" class="md-nav__link">
    Run not starting
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#getting-help-with-run-issues" class="md-nav__link">
    Getting help with run issues
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#custom-runner-images" class="md-nav__link">
    Custom runner images
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#networking-issues-caused-by-pod-identity" class="md-nav__link">
    Networking issues caused by Pod identity
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
  <div>
    <div class="mobile-nav-wrapper" >
      <a href="../.." title="Spacelift Documentation" class="md-header__button md-logo logo--small" aria-label="Spacelift Documentation" data-md-component="logo">
        <svg width="127" height="29" viewBox="0 0 127 29" fill="none" xmlns="http://www.w3.org/2000/svg">
  <g clip-path="url(#clip0_1558_12595)">
  <path d="M4.14743 20.2839C2.37689 20.0464 2.23263 19.7222 2.23263 19.3541C2.23263 19.0409 2.42089 18.5155 3.68104 18.5155C5.12227 18.5155 5.4322 19.1021 5.53956 19.5432L5.55886 19.6229H7.42966L7.41889 19.5092C7.36579 18.9461 6.94637 17.1099 3.77146 17.1099C1.24549 17.1099 0.348912 18.3995 0.348912 19.504C0.348912 20.8483 1.3723 21.5818 3.66807 21.8823C5.63045 22.1198 5.79261 22.5281 5.79261 22.9613C5.79261 23.5972 5.21412 23.92 4.07263 23.92C2.87747 23.92 2.15074 23.5073 1.91186 22.693L1.8899 22.6179H0L0.0192943 22.7382C0.285581 24.4015 1.72484 25.3553 3.96797 25.3553C6.32461 25.3553 7.67638 24.4335 7.67638 22.8265C7.67638 21.7578 7.24877 20.71 4.14743 20.2839Z" fill="white"/>
  <path d="M13.9331 17.1099C12.45 17.1099 11.6169 17.7189 11.155 18.3264C11.1504 17.9594 11.1372 17.5881 11.1116 17.4088L11.0988 17.3195H9.24176L9.24435 17.4261C9.2592 18.0535 9.2592 18.6965 9.2592 19.3244V28.4533H11.1576V24.3204C11.469 24.6735 11.8583 24.9506 12.2951 25.1301C12.732 25.3096 13.2047 25.3866 13.6764 25.3552C15.9282 25.3552 17.6266 23.5282 17.6266 21.1055C17.6266 18.8277 16.0386 17.1099 13.9331 17.1099ZM15.6827 21.1801C15.6827 22.3749 15.0823 23.7701 13.3903 23.7701C11.964 23.7701 11.1124 22.8354 11.1124 21.27C11.1124 19.6333 11.9538 18.695 13.4206 18.695C14.9836 18.695 15.6827 19.9432 15.6827 21.1801V21.1801Z" fill="white"/>
  <path d="M26.3254 23.0963V19.8785C26.3254 18.0419 25.1082 17.1104 22.7076 17.1104C19.6657 17.1104 19.1752 18.8828 19.1051 19.6447L19.0948 19.7582H20.9825L21.0005 19.6759C21.1192 19.1289 21.3594 18.5459 22.723 18.5459C24.2603 18.5459 24.4573 19.2822 24.4573 19.9236V20.1936H22.768C20.0089 20.1936 18.6674 21.0455 18.6674 22.7974C18.6674 24.0707 19.6181 25.3558 21.7426 25.3558C23.0544 25.3558 23.9816 25.0083 24.5048 24.322C24.512 24.5714 24.5374 24.82 24.581 25.0657L24.5999 25.1462H26.3956L26.3858 25.0332C26.3704 24.8513 26.3254 23.903 26.3254 23.0963ZM20.5356 22.7072C20.5356 21.8779 21.2122 21.5241 22.7982 21.5241C23.6952 21.5241 24.204 21.5241 24.4572 21.5337V21.7043C24.4572 23.145 23.6706 23.8752 22.1195 23.8752C21.113 23.8753 20.5356 23.4497 20.5356 22.7073V22.7072Z" fill="white"/>
  <path d="M34.1918 22.5736C34.0301 22.9752 33.7422 23.3144 33.3709 23.5408C32.9996 23.7671 32.5647 23.8686 32.1307 23.8302C30.7467 23.8302 29.8528 22.8079 29.8528 21.2254C29.8528 19.652 30.7467 18.6355 32.1307 18.6355C32.5675 18.5974 33.0045 18.7056 33.3721 18.9429C33.7397 19.1802 34.0165 19.5329 34.1585 19.9447L34.1841 20.0124H36.0523L36.0334 19.8926C35.8733 18.859 34.874 17.1102 32.1455 17.1102C31.5892 17.0887 31.0343 17.1808 30.5154 17.3809C29.9964 17.581 29.5244 17.8848 29.1286 18.2735C28.7328 18.6621 28.4217 19.1274 28.2145 19.6403C28.0073 20.1532 27.9085 20.7029 27.9242 21.2553C27.9242 23.7461 29.5756 25.3555 32.1308 25.3555C34.1509 25.3555 35.6208 24.3415 36.0616 22.6433L36.0953 22.5133H34.2197L34.1918 22.5736Z" fill="white"/>
  <path d="M41.2361 17.1099C38.795 17.1099 37.09 18.8145 37.09 21.255C37.09 23.296 38.3813 25.3552 41.2662 25.3552C43.9407 25.3552 44.8943 23.8018 45.2252 22.8761L45.2749 22.7373H43.3754L43.3457 22.7909C42.9376 23.5199 42.3153 23.8451 41.3266 23.8451C40.7363 23.8688 40.1604 23.6603 39.7242 23.2648C39.2879 22.8694 39.0266 22.3189 38.9971 21.7333H45.3368V21.2101C45.3368 19.3188 44.2627 17.1099 41.2361 17.1099ZM41.2213 18.5754C42.9008 18.5754 43.3028 19.6722 43.3836 20.4026H39.0329C39.2016 19.2394 39.9933 18.5754 41.2213 18.5754V18.5754Z" fill="white"/>
  <path d="M48.7889 13.7126H46.89V25.1457H48.7889V13.7126Z" fill="white"/>
  <path d="M51.8953 13.7429C51.7046 13.7429 51.5182 13.799 51.3597 13.9042C51.2011 14.0093 51.0775 14.1588 51.0046 14.3336C50.9316 14.5085 50.9125 14.7009 50.9497 14.8865C50.9869 15.0721 51.0787 15.2427 51.2135 15.3765C51.3483 15.5103 51.5201 15.6015 51.7071 15.6384C51.8942 15.6753 52.088 15.6564 52.2642 15.5839C52.4403 15.5115 52.5909 15.3888 52.6968 15.2315C52.8028 15.0741 52.8593 14.8891 52.8593 14.6998C52.859 14.4461 52.7573 14.203 52.5766 14.0236C52.3959 13.8442 52.1509 13.7433 51.8953 13.7429V13.7429Z" fill="white"/>
  <path d="M52.8593 17.3196H50.9604V25.1456H52.8593V17.3196Z" fill="white"/>
  <path d="M64.3173 18.8148V17.3196H62.3722V14.9248H60.474V17.3196H57.4872V16.5556C57.4872 15.4766 57.7552 15.1479 58.6343 15.1479C58.839 15.1467 59.0432 15.1659 59.2441 15.205L59.3724 15.2344V13.7067L59.2947 13.6862C58.9791 13.6164 58.656 13.5851 58.3326 13.593C56.5381 13.593 55.5894 14.5966 55.5894 16.4957V17.3196H54.1865V18.8148H55.5894V25.1456H57.4873V18.8148H60.474V22.8868C60.474 24.5445 61.129 25.2206 62.7349 25.2206C63.1738 25.238 63.6127 25.1857 64.035 25.0658L64.1066 25.042V23.6414L63.9798 23.6682C63.7479 23.7088 63.5128 23.728 63.2774 23.7257C62.5833 23.7257 62.3722 23.4738 62.3722 22.6472V18.815L64.3173 18.8148Z" fill="white"/>
  <path d="M85.0313 13.3309C84.7135 15.7217 83.7448 17.1479 82.3735 17.244C81.9088 17.248 81.4495 17.1448 81.0319 16.9424C80.6143 16.7401 80.2498 16.4442 79.9671 16.078C80.9802 15.3705 81.834 14.4616 82.4744 13.4091C83.1148 12.3566 83.5278 11.1834 83.6871 9.96411C78.2026 11.5851 72.53 12.4954 66.8103 12.6724C67.4741 14.0378 68.4801 15.2111 69.732 16.0798C67.5305 18.588 66.3489 21.82 66.4172 25.1459H68.7289C68.6742 22.5575 69.5236 20.03 71.1329 17.9925C70.7869 20.3637 70.5695 22.7516 70.4817 25.1459H74.5859C74.5859 25.1459 73.8332 22.0568 75.0587 22.0541C76.2841 22.0568 75.5313 25.1459 75.5313 25.1459H79.6357C79.5544 22.884 79.3552 20.6277 79.0389 18.3862C79.4956 18.7514 80.0086 19.0413 80.5581 19.2449C81.1894 19.479 81.8637 19.5773 82.5362 19.5332C83.1422 19.4881 83.7323 19.3196 84.2697 19.0382C84.8072 18.7567 85.2805 18.3685 85.6601 17.8975C86.5236 16.8739 87.083 15.4385 87.3234 13.6311L85.0313 13.3309Z" fill="white"/>
  <path d="M75.4568 12.6078C83.6095 11.2913 89.9565 8.62502 89.6332 6.65259C89.3099 4.68017 82.4388 4.14848 74.2861 5.46504C66.1334 6.7816 59.7864 9.44784 60.1097 11.4203C60.433 13.3927 67.3041 13.9244 75.4568 12.6078Z" fill="url(#paint0_linear_1558_12595)"/>
  <path d="M82.8799 5.00777C81.9499 3.09289 80.3567 1.57417 78.3915 0.729234C76.4263 -0.1157 74.2204 -0.230408 72.177 0.406083C70.1337 1.04257 68.3893 2.38775 67.2629 4.1957C66.1364 6.00365 65.7031 8.15361 66.0421 10.2526C66.4721 12.8929 84.0988 10.1931 83.6483 7.4274C83.5107 6.58838 83.2519 5.77345 82.8799 5.00777V5.00777Z" fill="white"/>
  <path d="M91.605 24.8349V13.1858H95.6015C97.5158 13.1858 98.9935 13.687 100.035 14.6894C101.076 15.6808 101.596 17.1184 101.596 19.0021C101.596 20.8858 101.076 22.3288 100.035 23.3312C98.9935 24.3337 97.5158 24.8349 95.6015 24.8349H91.605ZM92.9819 23.6782H95.5008C98.5905 23.6782 100.135 22.1195 100.135 19.0021C100.135 15.8957 98.5905 14.3424 95.5008 14.3424H92.9819V23.6782Z" fill="white"/>
  <path d="M107.275 24.9836C106.48 24.9836 105.792 24.8129 105.21 24.4714C104.628 24.1299 104.174 23.6507 103.85 23.0338C103.536 22.4059 103.379 21.6679 103.379 20.8197C103.379 19.9715 103.536 19.2389 103.85 18.622C104.174 17.9941 104.628 17.5095 105.21 17.168C105.792 16.8265 106.48 16.6557 107.275 16.6557C108.059 16.6557 108.742 16.8265 109.324 17.168C109.917 17.5095 110.371 17.9941 110.684 18.622C111.009 19.2389 111.171 19.9715 111.171 20.8197C111.171 21.6679 111.009 22.4059 110.684 23.0338C110.371 23.6507 109.917 24.1299 109.324 24.4714C108.742 24.8129 108.059 24.9836 107.275 24.9836ZM107.275 23.9096C108.036 23.9096 108.647 23.6452 109.106 23.1164C109.564 22.5767 109.794 21.8111 109.794 20.8197C109.794 19.8172 109.564 19.0517 109.106 18.5229C108.647 17.9941 108.036 17.7298 107.275 17.7298C106.503 17.7298 105.887 17.9941 105.428 18.5229C104.98 19.0517 104.756 19.8172 104.756 20.8197C104.756 21.8111 104.98 22.5767 105.428 23.1164C105.887 23.6452 106.503 23.9096 107.275 23.9096Z" fill="white"/>
  <path d="M116.673 24.9836C115.856 24.9836 115.151 24.8129 114.557 24.4714C113.964 24.1189 113.505 23.6287 113.18 23.0008C112.867 22.3619 112.71 21.6183 112.71 20.7701C112.71 19.4923 113.063 18.4899 113.768 17.7628C114.473 17.0248 115.442 16.6557 116.673 16.6557C117.177 16.6557 117.675 16.7439 118.168 16.9201C118.66 17.0964 119.069 17.3442 119.393 17.6637L118.923 18.6386C118.599 18.3301 118.24 18.1043 117.849 17.9611C117.468 17.8179 117.104 17.7463 116.757 17.7463C115.906 17.7463 115.251 18.0107 114.792 18.5394C114.333 19.0572 114.104 19.8062 114.104 20.7866C114.104 21.745 114.333 22.5051 114.792 23.0669C115.251 23.6177 115.906 23.8931 116.757 23.8931C117.104 23.8931 117.468 23.8214 117.849 23.6782C118.24 23.535 118.599 23.3037 118.923 22.9843L119.393 23.9591C119.069 24.2786 118.655 24.532 118.151 24.7192C117.658 24.8955 117.166 24.9836 116.673 24.9836Z" fill="white"/>
  <path d="M123.741 24.9836C123.103 24.9836 122.498 24.8955 121.927 24.7192C121.356 24.543 120.886 24.2951 120.517 23.9757L120.953 23.0338C121.356 23.3533 121.798 23.5901 122.28 23.7443C122.772 23.8875 123.271 23.9591 123.774 23.9591C124.412 23.9591 124.894 23.8435 125.218 23.6122C125.543 23.3808 125.705 23.0669 125.705 22.6703C125.705 22.3619 125.599 22.1195 125.386 21.9433C125.174 21.756 124.838 21.6128 124.379 21.5137L122.851 21.1832C121.463 20.8858 120.769 20.1808 120.769 19.0682C120.769 18.3411 121.06 17.7573 121.642 17.3167C122.235 16.8761 123.007 16.6557 123.959 16.6557C124.519 16.6557 125.051 16.7439 125.554 16.9201C126.069 17.0853 126.495 17.3332 126.831 17.6637L126.377 18.6055C126.052 18.3081 125.672 18.0823 125.235 17.9281C124.81 17.7628 124.384 17.6802 123.959 17.6802C123.332 17.6802 122.856 17.8014 122.532 18.0437C122.207 18.2861 122.045 18.6055 122.045 19.0021C122.045 19.619 122.459 20.0155 123.287 20.1918L124.815 20.5057C125.532 20.6599 126.075 20.9078 126.444 21.2493C126.814 21.5798 126.998 22.0314 126.998 22.6042C126.998 23.3423 126.702 23.9261 126.108 24.3557C125.515 24.7743 124.726 24.9836 123.741 24.9836Z" fill="white"/>
  </g>
  <defs>
  <linearGradient id="paint0_linear_1558_12595" x1="60.0978" y1="9.0365" x2="89.645" y2="9.0365" gradientUnits="userSpaceOnUse">
  <stop offset="0.0817" stop-color="#82FFE8"/>
  <stop offset="0.9512" stop-color="#7C47FC"/>
  </linearGradient>
  <clipPath id="clip0_1558_12595">
  <rect width="127" height="29" fill="white"/>
  </clipPath>
  </defs>
  </svg>
      </a>
      <label for="__drawer" class="close-button">
        <svg viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path fill-rule="evenodd" clip-rule="evenodd" d="M4.25372 4.75372C4.59201 4.41543 5.14048 4.41543 5.47877 4.75372L12 11.2749L18.5212 4.75372C18.8595 4.41543 19.408 4.41543 19.7463 4.75372C20.0846 5.09201 20.0846 5.64048 19.7463 5.97877L13.2251 12.5L19.7463 19.0212C20.0846 19.3595 20.0846 19.908 19.7463 20.2463C19.408 20.5846 18.8595 20.5846 18.5212 20.2463L12 13.7251L5.47877 20.2463C5.14048 20.5846 4.59201 20.5846 4.25372 20.2463C3.91543 19.908 3.91543 19.3595 4.25372 19.0212L10.7749 12.5L4.25372 5.97877C3.91543 5.64048 3.91543 5.09201 4.25372 4.75372Z" fill="currentColor"/>
  </svg>
      </label>
    </div>

    
                  


<h1 id="kubernetes-workers">Kubernetes Workers<a class="headerlink" href="#kubernetes-workers" title="Anchor link to this section">»</a></h1>
<p>We provide a Kubernetes operator for managing Spacelift worker pools. The operator also works on OpenShift. This operator allows you to define <code>WorkerPool</code> resources in your cluster, and allows you to scale these pools up and down using standard Kubernetes functionality.</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>Previously we provided a <a href="https://github.com/spacelift-io/spacelift-helm-charts/tree/main/spacelift-worker-pool" rel="nofollow">Helm chart</a> for deploying worker pools to Kubernetes using Docker-in-Docker. This approach is no-longer recommended, and you should use the Kubernetes operator instead. Please see the section on <a href="#migrating-from-docker-in-docker">migrating from Docker-in-Docker</a> for more information.</p>
</div>
<p>A <code>WorkerPool</code> defines the number of <code>Workers</code> registered with Spacelift via the <code>poolSize</code> parameter. The Spacelift operator will automatically create and register a number of <code>Worker</code> resources in Kubernetes depending on your <code>poolSize</code>.</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p><code>Worker</code> resources do not use up any cluster resources other than an entry in the Kubernetes API when they are idle. <code>Pods</code> are created on demand for <code>Workers</code> when scheduling messages are received from Spacelift. This means that in an idle state no additional resources are being used in your cluster other than what is required to run the controller component of the Spacelift operator.</p>
</div>
<h2 id="kubernetes-version-compatibility">Kubernetes version compatibility<a class="headerlink" href="#kubernetes-version-compatibility" title="Anchor link to this section">»</a></h2>
<p>The spacelift controller is compatible with Kubernetes version <strong>v1.26+</strong>.
The controller may also work with older versions, but we do not guarantee and provide support for unmaintained Kubernetes versions.</p>
<h2 id="installation">Installation<a class="headerlink" href="#installation" title="Anchor link to this section">»</a></h2>
<h3 id="controller-setup">Controller setup<a class="headerlink" href="#controller-setup" title="Anchor link to this section">»</a></h3>
<div class="tabbed-set tabbed-alternate" data-tabs="1:2"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">Kubectl</label><label for="__tabbed_1_2">Helm</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>To install the worker pool controller along with its CRDs, run the following command:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>kubectl<span class="w"> </span>apply<span class="w"> </span>--server-side<span class="w"> </span>-f<span class="w"> </span>https://downloads.spacelift.io/kube-workerpool-controller/latest/manifests.yaml
</code></pre></div></td></tr></table></div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>It is important to use the <code>--server-side</code> flag here. The reason is that our CRD definitions
contains long field descriptions. This causes the apply to fail, as detailed <a href="https://github.com/kubernetes-sigs/kubebuilder/issues/3460">in this kubebuilder issue</a>,
because kubernetes sets the <code>kubectl.kubernetes.io/last-applied-configuration</code> annotation, and the size of the CRD exceed
the maximum size of an annotation field.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>You can download the manifests yourself from <a href="https://downloads.spacelift.io/kube-workerpool-controller/latest/manifests.yaml">https://downloads.spacelift.io/kube-workerpool-controller/latest/manifests.yaml</a> if you would like to inspect them or alter the Deployment configuration for the controller.</p>
</div>
</div>
<div class="tabbed-block">
<p>You can install the controller using the official <a href="https://github.com/spacelift-io/spacelift-helm-charts/tree/main/spacelift-workerpool-controller">spacelift-workerpool-controller</a> Helm chart.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code>helm<span class="w"> </span>repo<span class="w"> </span>add<span class="w"> </span>spacelift<span class="w"> </span>https://downloads.spacelift.io/helm
helm<span class="w"> </span>repo<span class="w"> </span>update
helm<span class="w"> </span>upgrade<span class="w"> </span>spacelift-workerpool-controller<span class="w"> </span>spacelift/spacelift-workerpool-controller<span class="w"> </span>--install<span class="w"> </span>--namespace<span class="w"> </span>spacelift-worker-controller-system<span class="w"> </span>--create-namespace
</code></pre></div></td></tr></table></div>
<p>You can open <code>values.yaml</code> from the helm chart repo for more customization options.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><a href="https://helm.sh/docs/chart_best_practices/custom_resource_definitions/#some-caveats-and-explanations">Helm has no support at this time for upgrading or deleting crd's</a> so this would need to be done manually through kubernetes.
<a href="https://github.com/spacelift-io/spacelift-helm-charts/tree/main/spacelift-workerpool-controller/crds">The latest CRD's can be found in this link</a>.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Prometheus metrics</p>
<p>The controller also has a subchart for our prometheus-exporter project that exposes metrics in OpenMetrics spec.
This is useful for scaling workers based on queue length in spacelift (<code>spacelift_worker_pool_runs_pending</code> metric).
To install the controller with the prometheus-exporter subchart, use the following command:
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code>helm<span class="w"> </span>upgrade<span class="w"> </span>spacelift-workerpool-controller<span class="w"> </span>spacelift/spacelift-workerpool-controller<span class="w"> </span>--install<span class="w"> </span>--namespace<span class="w"> </span>spacelift-worker-controller-system<span class="w"> </span>--create-namespace<span class="w"> </span><span class="se">\</span>
--set<span class="w"> </span>spacelift-promex.enabled<span class="o">=</span><span class="nb">true</span><span class="w"> </span><span class="se">\</span>
--set<span class="w"> </span>spacelift-promex.apiEndpoint<span class="o">=</span><span class="s2">&quot;https://{yourAccount}.app.spacelift.io&quot;</span><span class="w"> </span><span class="se">\</span>
--set<span class="w"> </span>spacelift-promex.apiKeyId<span class="o">=</span><span class="s2">&quot;{yourApiToken}&quot;</span><span class="w"> </span><span class="se">\</span>
--set<span class="w"> </span>spacelift-promex.apiKeySecretName<span class="o">=</span><span class="s2">&quot;spacelift-api-key&quot;</span>
</code></pre></div></td></tr></table></div>
Read more on the exporter on its repository <a href="https://github.com/spacelift-io/prometheus-exporter">here</a> and see more config options in the <code>values.yaml</code> file for the subchart.</p>
</div>
</div>
</div>
</div>
<h4 id="openshift">OpenShift<a class="headerlink" href="#openshift" title="Anchor link to this section">»</a></h4>
<p>If you are using OpenShift, additional steps are required to allow the controller to run properly.</p>
<ol>
<li>
<p>Get the controllers service account name:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>kubectl<span class="w"> </span>get<span class="w"> </span>serviceaccounts<span class="w"> </span>-n<span class="w"> </span><span class="o">{</span>namespace_of_controller<span class="o">}</span>
</code></pre></div></td></tr></table></div>
</li>
<li>
<p>Add the <code>anyuid</code> security context constraint to the service account:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>oc<span class="w"> </span>adm<span class="w"> </span>policy<span class="w"> </span>add-scc-to-user<span class="w"> </span>anyuid<span class="w"> </span>-z<span class="w"> </span><span class="o">{</span>service_account_name<span class="o">}</span><span class="w"> </span>-n<span class="w"> </span><span class="o">{</span>namespace_of_controller<span class="o">}</span><span class="w"> </span>--as<span class="w"> </span>system:admin
</code></pre></div></td></tr></table></div>
</li>
<li>
<p>Create a Spacelift Admin role in the namespace where your worker pods will run (note this may be different from the namespace you installed the controller into):</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>oc<span class="w"> </span>create<span class="w"> </span>role<span class="w"> </span>spacelift-admin<span class="w"> </span>--verb<span class="o">=</span><span class="s1">&#39;*&#39;</span><span class="w"> </span>--resource<span class="o">=</span><span class="s1">&#39;*&#39;</span><span class="w"> </span>-n<span class="w"> </span><span class="o">{</span>namespace_of_worker_pods<span class="o">}</span>
</code></pre></div></td></tr></table></div>
</li>
<li>
<p>Bind the role to the controller's service account:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>oc<span class="w"> </span>create<span class="w"> </span>rolebinding<span class="w"> </span>spacelift-admin-binding<span class="w"> </span>--role<span class="o">=</span>spacelift-admin<span class="w"> </span>--serviceaccount<span class="o">={</span>namespace_of_controller<span class="o">}</span>:<span class="o">{</span>service_account_name<span class="o">}</span><span class="w"> </span>-n<span class="w"> </span><span class="o">{</span>namespace_of_worker_pods<span class="o">}</span>
</code></pre></div></td></tr></table></div>
</li>
<li>
<p>Ensure the controller can indeed use the kubernetes api in the namespace where your worker pods will run:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>oc<span class="w"> </span>auth<span class="w"> </span>can-i<span class="w"> </span><span class="s1">&#39;*&#39;</span><span class="w"> </span><span class="s1">&#39;*&#39;</span><span class="w"> </span>--as<span class="o">=</span>system:serviceaccount:<span class="o">{</span>namespace_of_controller<span class="o">}</span>:<span class="o">{</span>service_account_name<span class="o">}</span><span class="w"> </span>-n<span class="w"> </span><span class="o">{</span>namespace_of_worker_pods<span class="o">}</span>
</code></pre></div></td></tr></table></div>
<p>Note: this should return <code>yes</code> if everything is set up correctly.</p>
</li>
<li>
<p>Restart the worker controller pod to make sure it picks up the new permissions.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>kubectl<span class="w"> </span>rollout<span class="w"> </span>restart<span class="w"> </span>deployments<span class="w"> </span>-n<span class="w"> </span><span class="o">{</span>namespace_of_controller<span class="o">}</span>
</code></pre></div></td></tr></table></div>
</li>
</ol>
<h3 id="create-a-secret">Create a Secret<a class="headerlink" href="#create-a-secret" title="Anchor link to this section">»</a></h3>
<p>Next, create a Secret containing the private key and token for your worker pool, generated <a href="../worker-pools.html#setting-up">earlier in this guide</a>.</p>
<p>First, export the token and private key as base64 encoded strings:</p>
<h4 id="mac">Mac<a class="headerlink" href="#mac" title="Anchor link to this section">»</a></h4>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nb">export</span><span class="w"> </span><span class="nv">SPACELIFT_WP_TOKEN</span><span class="o">=</span><span class="k">$(</span>cat<span class="w"> </span>./your-workerpool-config-file.config<span class="k">)</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">SPACELIFT_WP_PRIVATE_KEY</span><span class="o">=</span><span class="k">$(</span>cat<span class="w"> </span>./your-private-key.pem<span class="w"> </span><span class="p">|</span><span class="w"> </span>base64<span class="w"> </span>-b<span class="w"> </span><span class="m">0</span><span class="k">)</span>
</code></pre></div></td></tr></table></div>
<h4 id="linux">Linux<a class="headerlink" href="#linux" title="Anchor link to this section">»</a></h4>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nb">export</span><span class="w"> </span><span class="nv">SPACELIFT_WP_TOKEN</span><span class="o">=</span><span class="k">$(</span>cat<span class="w"> </span>./your-workerpool-config-file.config<span class="k">)</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">SPACELIFT_WP_PRIVATE_KEY</span><span class="o">=</span><span class="k">$(</span>cat<span class="w"> </span>./your-private-key.pem<span class="w"> </span><span class="p">|</span><span class="w"> </span>base64<span class="w"> </span>-w<span class="w"> </span><span class="m">0</span><span class="k">)</span>
</code></pre></div></td></tr></table></div>
<p>Then, create the secret.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span></pre></div></td><td class="code"><div><pre><span></span><code>kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>-<span class="w"> </span><span class="s">&lt;&lt;EOF</span>
<span class="s">apiVersion: v1</span>
<span class="s">kind: Secret</span>
<span class="s">metadata:</span>
<span class="s">  name: test-workerpool</span>
<span class="s">type: Opaque</span>
<span class="s">stringData:</span>
<span class="s">  token: ${SPACELIFT_WP_TOKEN}</span>
<span class="s">  privateKey: ${SPACELIFT_WP_PRIVATE_KEY}</span>
<span class="s">EOF</span>
</code></pre></div></td></tr></table></div>
<h3 id="create-a-workerpool">Create a WorkerPool<a class="headerlink" href="#create-a-workerpool" title="Anchor link to this section">»</a></h3>
<p>Finally, create a WorkerPool resource using the following command:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span></pre></div></td><td class="code"><div><pre><span></span><code>kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>-<span class="w"> </span><span class="s">&lt;&lt;EOF</span>
<span class="s">apiVersion: workers.spacelift.io/v1beta1</span>
<span class="s">kind: WorkerPool</span>
<span class="s">metadata:</span>
<span class="s">  name: test-workerpool</span>
<span class="s">spec:</span>
<span class="s">  poolSize: 2</span>
<span class="s">  token:</span>
<span class="s">    secretKeyRef:</span>
<span class="s">      name: test-workerpool</span>
<span class="s">      key: token</span>
<span class="s">  privateKey:</span>
<span class="s">    secretKeyRef:</span>
<span class="s">      name: test-workerpool</span>
<span class="s">      key: privateKey</span>
<span class="s">EOF</span>
</code></pre></div></td></tr></table></div>
<h3 id="grant-access-to-the-launcher-image">Grant access to the Launcher image<a class="headerlink" href="#grant-access-to-the-launcher-image" title="Anchor link to this section">»</a></h3>
<p>During your Self-Hosted installation process, the Spacelift launcher image should be uploaded to a container repository. For instance, it could be Artifact Registry in GCP or ECR in AWS.</p>
<p><img alt="spacelift-launcher ECR" src="../../assets/screenshots/worker-pools-kubernetes-self-hosted-ecr.png" /></p>
<p>The launcher image is used during runs on Kubernetes workers to prepare the workspace for the run, and the Kubernetes cluster that you want to run your workers on <strong>needs to be able to pull that image</strong> for runs to succeed.</p>
<p>Some options for this include:</p>
<ol>
<li>If your Kubernetes cluster is running inside AWS, you can <a href="https://docs.aws.amazon.com/AmazonECR/latest/userguide/repository-policies.html">add a policy</a> to your ECR to allow pulls from your cluster nodes. Alternatively, you can use one of the methods listed in the <a href="https://docs.aws.amazon.com/AmazonECR/latest/userguide/registry_auth.html">ECR private registry authentication guide</a>.</li>
<li>You can copy the image to a registry accessible by your cluster, and then set the <code>spec.pod.launcherImage</code> configuration option on your <code>WorkerPool</code> resource to point at it.</li>
</ol>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>You can deploy the controller globally (the default option) to monitor all namespaces, allowing worker pools in multiple namespaces, or restrict it to specific namespaces using the <code>namespaces</code> <a href="https://github.com/spacelift-io/spacelift-helm-charts/blob/88fa4327408b55082d5a18a1f6ccf2ed2ab90228/spacelift-workerpool-controller/values.yaml#L10">option in the Helm chart values</a>. The namespace of the controller and workers themselves doesn’t impact functionality.</p>
</div>
<p>That's it - the workers in your pool should connect to Spacelift, and you should be able to trigger runs!</p>
<h2 id="upgrade">Upgrade<a class="headerlink" href="#upgrade" title="Anchor link to this section">»</a></h2>
<p>Usually, there is nothing special to do for upgrading the controller.</p>
<p>Some release of the controller may include backward compatibility breaks, you can find below instructions about how to upgrade for those specials versions.</p>
<h3 id="upgrading-to-controller-v0017-or-helm-chart-v0330">Upgrading to controller v0.0.17 - or Helm chart v0.33.0<a class="headerlink" href="#upgrading-to-controller-v0017-or-helm-chart-v0330" title="Anchor link to this section">»</a></h3>
<p>This release changes the way the controller exposes metrics by removing usage of the <code>kube-rbac-proxy</code> container.</p>
<p>You can find more context about the reason for this change in the <a href="https://github.com/kubernetes-sigs/kubebuilder/discussions/3907">Kubebuilder repository</a>.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="2:2"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><input id="__tabbed_2_2" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="__tabbed_2_1">Kubectl</label><label for="__tabbed_2_2">Helm</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>If the controller was installed using compiled Kubernetes manifest using <code>kubectl apply -f ...</code>,
you should first uninstall the current release before deploying the new one.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The command below will remove CRDs and thus also remove your <code>WorkerPool</code> from the cluster.
Before running it, make sure that you'll be able to recreate them after the upgrade.</p>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># Scale down all your workerpools to zero, and make sure there is no remaining Worker resource in the cluster.</span>
<span class="c1"># Otherwise the kubectl delete function below will be stuck and you&#39;ll have to remove finalizers by hand on Workers.</span>
kubectl<span class="w"> </span>scale<span class="w"> </span>workerpool/<span class="si">${</span><span class="nv">WORKERPOOL_NAME</span><span class="si">}</span><span class="w"> </span>--replicas<span class="w"> </span><span class="m">0</span>
<span class="c1"># If your&#39;re using v0.0.16, change the version to the one that is currently deployed in your cluster.</span>
kubectl<span class="w"> </span>delete<span class="w"> </span>-f<span class="w"> </span>https://downloads.spacelift.io/kube-workerpool-controller/v0.0.16/manifests.yaml
</code></pre></div></td></tr></table></div>
<p>Then you can install the new controller version with the following command.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>https://downloads.spacelift.io/kube-workerpool-controller/v0.0.17/manifests.yaml
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<p>CRDs have been updated in this new version, and Helm does not perform CRDs update for us.
So before upgrading to the latest version of the chart, you should execute the following commands to upgrade CRDs.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code>kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>https://raw.githubusercontent.com/spacelift-io/spacelift-helm-charts/refs/tags/v0.33.0/spacelift-workerpool-controller/crds/worker-crd.yaml
kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>https://raw.githubusercontent.com/spacelift-io/spacelift-helm-charts/refs/tags/v0.33.0/spacelift-workerpool-controller/crds/workerpool-crd.yaml
</code></pre></div></td></tr></table></div>
<p>Once done, you can upgrade the chart like usual with <code>helm upgrade</code>.</p>
</div>
</div>
</div>
<h2 id="run-containers">Run Containers<a class="headerlink" href="#run-containers" title="Anchor link to this section">»</a></h2>
<p>When a run assigned to a Kubernetes worker is scheduled by Spacelift, the worker pool controller creates a new Pod to process the run. This Pod consists of the following containers:</p>
<ul>
<li>An init container called <code>init</code>, responsible for populating the workspace for the run.</li>
<li>A <code>launcher-grpc</code> container that runs a gRPC server used by the worker for certain tasks like uploading the workspace between run stages, and notifying the worker when a user has requested that the run be stopped.</li>
<li>A <code>worker</code> container that executes your run.</li>
</ul>
<p>The <code>init</code> and <code>launcher-grpc</code> containers use the <code>public.ecr.aws/spacelift/launcher:&lt;version&gt;</code> container image published by Spacelift. By default, the Spacelift backend sends the correct value for <code>&lt;version&gt;</code> through to the controller for each run, guaranteeing that the run is pinned to a specific image version that is compatible with the Spacelift backend.</p>
<p>The <code>worker</code> container uses the <a href="../stack/stack-settings.html#runner-image">runner image</a> specified by your Spacelift stack.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>You can use the <code>spec.pod.launcherImage</code> configuration option to pin the <code>init</code> and <code>launcher-grpc</code> containers to a specific version, but we do not typically recommend doing this because it means that your run Pods could become incompatible with the Spacelift backend as new versions are released.</p>
</div>
<h2 id="resource-usage">Resource Usage<a class="headerlink" href="#resource-usage" title="Anchor link to this section">»</a></h2>
<h3 id="kubernetes-controller">Kubernetes Controller<a class="headerlink" href="#kubernetes-controller" title="Anchor link to this section">»</a></h3>
<p>During normal operations the worker pool controller CPU and memory usage should be fairly stable. The main operation that can be resource intensive is scaling out a worker pool. Scaling up involves generating an RSA keypair for each worker, and is CPU-bound. If you notice performance issues when scaling out, it's worth giving the controller more CPU.</p>
<h3 id="run-pods">Run Pods<a class="headerlink" href="#run-pods" title="Anchor link to this section">»</a></h3>
<p>Resource requests and limits for the <code>init</code>, <code>launcher-grpc</code> and <code>worker</code> containers can be set via your <code>WorkerPool</code> definitions, like in the following example:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">workers.spacelift.io/v1beta1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">WorkerPool</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">test-pool</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">poolSize</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="w">  </span><span class="nt">token</span><span class="p">:</span>
<span class="w">    </span><span class="nt">secretKeyRef</span><span class="p">:</span>
<span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pool-credentials</span>
<span class="w">      </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">token</span>
<span class="w">  </span><span class="nt">privateKey</span><span class="p">:</span>
<span class="w">    </span><span class="nt">secretKeyRef</span><span class="p">:</span>
<span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pool-credentials</span>
<span class="w">      </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">privateKey</span>
<span class="w">  </span><span class="nt">pod</span><span class="p">:</span>
<span class="w">    </span><span class="nt">initContainer</span><span class="p">:</span>
<span class="w">      </span><span class="nt">resources</span><span class="p">:</span>
<span class="w">        </span><span class="nt">requests</span><span class="p">:</span>
<span class="w">          </span><span class="nt">cpu</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">500m</span>
<span class="w">          </span><span class="nt">memory</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">200Mi</span>
<span class="w">        </span><span class="c1"># Please note: we recommend being very cautious when adding resource limits</span>
<span class="w">        </span><span class="c1"># to your containers. Setting too low a limit on the init container can cause</span>
<span class="w">        </span><span class="c1"># runs to fail during the preparing phase.</span>
<span class="w">        </span><span class="c1"># limits:</span>
<span class="w">        </span><span class="c1">#   cpu: 100m</span>
<span class="w">        </span><span class="c1">#   memory: 50Mi</span>
<span class="w">    </span><span class="nt">grpcServerContainer</span><span class="p">:</span>
<span class="w">      </span><span class="nt">resources</span><span class="p">:</span>
<span class="w">        </span><span class="nt">requests</span><span class="p">:</span>
<span class="w">          </span><span class="nt">cpu</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">500m</span>
<span class="w">          </span><span class="nt">memory</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">200Mi</span>
<span class="w">        </span><span class="c1"># Setting too low limits on the grpc server container can cause runs to fail</span>
<span class="w">        </span><span class="c1"># when moving into the unconfirmed stage, as well as problems like not being</span>
<span class="w">        </span><span class="c1"># able to stop/cancel runs.</span>
<span class="w">        </span><span class="c1"># limits:</span>
<span class="w">        </span><span class="c1">#   cpu: 100m</span>
<span class="w">        </span><span class="c1">#   memory: 50Mi</span>
<span class="w">    </span><span class="nt">workerContainer</span><span class="p">:</span>
<span class="w">      </span><span class="nt">resources</span><span class="p">:</span>
<span class="w">        </span><span class="nt">requests</span><span class="p">:</span>
<span class="w">          </span><span class="nt">cpu</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">500m</span>
<span class="w">          </span><span class="nt">memory</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">200Mi</span>
<span class="w">        </span><span class="c1"># Setting too low limits on the worker container can cause problems executing</span>
<span class="w">        </span><span class="c1"># your IaC tool (e.g. OpenTofu, Terraform, etc), causing runs to fail during</span>
<span class="w">        </span><span class="c1"># planning, applying or destroying phases.</span>
<span class="w">        </span><span class="c1"># limits:</span>
<span class="w">        </span><span class="c1">#   cpu: 500m</span>
<span class="w">        </span><span class="c1">#   memory: 200Mi</span>
</code></pre></div></td></tr></table></div>
<p>You can use the values above as a baseline to get started, but the exact values you need for your pool will depend on your individual circumstances. You should use monitoring tools to adjust these to values that make sense.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>In general, we don't suggest setting very low CPU or memory limits for the <code>init</code>, <code>grpc</code> or <code>worker</code> containers since doing so could affect the performance of runs, or even cause runs to fail if they are set too low. And in particular, the worker container resource usage will very much depend on your workloads. For example stacks with large numbers of Terraform resources may use more memory than smaller stacks.</p>
</div>
<h2 id="volumes">Volumes<a class="headerlink" href="#volumes" title="Anchor link to this section">»</a></h2>
<p>There are two volumes that are always attached to your run Pods:</p>
<ul>
<li>The workspace volume.</li>
<li>The binaries cache volume.</li>
</ul>
<p>Both of these volumes default to using <code>emptyDir</code> storage with no size limit. Spacelift workers will function correctly without using a custom configuration for these volumes, but there may be situations where you wish to change this default, for example:</p>
<ul>
<li>To prevent Kubernetes evicting your run Pods due to disk pressure (and therefore causing runs to fail).</li>
<li>To support caching tool binaries (for example Terraform or OpenTofu) between runs.</li>
</ul>
<h3 id="workspace-volume">Workspace Volume<a class="headerlink" href="#workspace-volume" title="Anchor link to this section">»</a></h3>
<p>The workspace volume is used to store the temporary workspace data needed for processing a run. This includes metadata about the run, along with your source code. The workspace volume does not need to be shared or persisted between runs, and for that reason we recommend using an <a href="https://kubernetes.io/docs/concepts/storage/ephemeral-volumes/">Ephemeral Volume</a> so that the volume is bound to the lifetime of the run, and will be destroyed when the run Pod is deleted.</p>
<p>The workspace volume can be configured via the <code>spec.pod.workspaceVolume</code> property, which accepts a standard Kubernetes volume definition. Here's an example of using an ephemeral AWS GP2 volume for storage:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">workers.spacelift.io/v1beta1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">WorkerPool</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">worker-pool</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">poolSize</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">  </span><span class="nt">privateKey</span><span class="p">:</span>
<span class="w">    </span><span class="nt">secretKeyRef</span><span class="p">:</span>
<span class="w">      </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">privateKey</span>
<span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pool-credentials</span>
<span class="w">  </span><span class="nt">token</span><span class="p">:</span>
<span class="w">    </span><span class="nt">secretKeyRef</span><span class="p">:</span>
<span class="w">      </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">token</span>
<span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pool-credentials</span>
<span class="w">  </span><span class="nt">pod</span><span class="p">:</span>
<span class="w">    </span><span class="nt">securityContext</span><span class="p">:</span>
<span class="w">      </span><span class="c1"># The fsGroup may or may not be required depending on your volume type. The reason for</span>
<span class="w">      </span><span class="c1"># specifying it is because the containers in the run pods run as the Spacelift (UID 1983)</span>
<span class="w">      </span><span class="c1"># user. Depending on the volume type in use, you may experience permission errors during</span>
<span class="w">      </span><span class="c1"># runs if the fsGroup is not specified.</span>
<span class="w">      </span><span class="nt">fsGroup</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1983</span>

<span class="w">    </span><span class="c1"># The workspaceVolume property is used to specify the volume to use for the run&#39;s workspace.</span>
<span class="w">    </span><span class="nt">workspaceVolume</span><span class="p">:</span>
<span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">workspace</span>
<span class="w">      </span><span class="nt">ephemeral</span><span class="p">:</span>
<span class="w">        </span><span class="nt">volumeClaimTemplate</span><span class="p">:</span>
<span class="w">          </span><span class="nt">spec</span><span class="p">:</span>
<span class="w">            </span><span class="nt">accessModes</span><span class="p">:</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ReadWriteOnce</span>
<span class="w">            </span><span class="nt">resources</span><span class="p">:</span>
<span class="w">              </span><span class="nt">requests</span><span class="p">:</span>
<span class="w">                </span><span class="nt">storage</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1Gi</span>
<span class="w">            </span><span class="nt">storageClassName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gp2</span>
</code></pre></div></td></tr></table></div>
<h3 id="binaries-cache-volume">Binaries Cache Volume<a class="headerlink" href="#binaries-cache-volume" title="Anchor link to this section">»</a></h3>
<p>The binaries cache volume is used to cache binaries (e.g. <code>terraform</code> and <code>kubectl</code>) across multiple runs. You can use an ephemeral volume for the binaries cache like with the workspace volume, but doing so will not result in any caching benefits. To be able to share the binaries cache with multiple run pods, you need to use a volume type that supports <code>ReadWriteMany</code>, for example AWS EFS.</p>
<p>To configure the binaries cache volume, you can use exactly the same approach as with the <a href="#workspace-volume">workspace volume</a>, the only difference is that you should use the <code>spec.pod.binariesCacheVolume</code> property instead of <code>spec.pod.workspaceVolume</code>.</p>
<h3 id="custom-volumes">Custom Volumes<a class="headerlink" href="#custom-volumes" title="Anchor link to this section">»</a></h3>
<p>See the section on <a href="#configuration">configuration</a> for more details on how to configure these two volumes along with any additional volumes you require.</p>
<h2 id="configuration">Configuration<a class="headerlink" href="#configuration" title="Anchor link to this section">»</a></h2>
<p>The following example shows all the configurable options for a WorkerPool:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">  1</span>
<span class="normal">  2</span>
<span class="normal">  3</span>
<span class="normal">  4</span>
<span class="normal">  5</span>
<span class="normal">  6</span>
<span class="normal">  7</span>
<span class="normal">  8</span>
<span class="normal">  9</span>
<span class="normal"> 10</span>
<span class="normal"> 11</span>
<span class="normal"> 12</span>
<span class="normal"> 13</span>
<span class="normal"> 14</span>
<span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">workers.spacelift.io/v1beta1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">WorkerPool</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="c1"># name defines the name of the pool in Kubernetes - does not need to match the name in Spacelift.</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">test-workerpool</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="c1"># poolSize specifies the current number of Workers that belong to the pool.</span>
<span class="w">  </span><span class="c1"># Optional, defaults to 1 if not provided.</span>
<span class="w">  </span><span class="nt">poolSize</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>

<span class="w">  </span><span class="c1"># token points at a Kubernetes Secret key containing the worker pool token.</span>
<span class="w">  </span><span class="c1"># Required</span>
<span class="w">  </span><span class="nt">token</span><span class="p">:</span>
<span class="w">    </span><span class="nt">secretKeyRef</span><span class="p">:</span>
<span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">test-workerpool</span>
<span class="w">      </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">token</span>

<span class="w">  </span><span class="c1"># privateKey points at a Kubernetes Secret key containing the worker pool private key.</span>
<span class="w">  </span><span class="c1"># Required</span>
<span class="w">  </span><span class="nt">privateKey</span><span class="p">:</span>
<span class="w">    </span><span class="nt">secretKeyRef</span><span class="p">:</span>
<span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">test-workerpool</span>
<span class="w">      </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">privateKey</span>

<span class="w">  </span><span class="c1"># allowedRunnerImageHosts defines the hostnames of registries that are valid to use stack</span>
<span class="w">  </span><span class="c1"># runner images from. If no specified images from any registries are allowed.</span>
<span class="w">  </span><span class="c1"># Optional</span>
<span class="w">  </span><span class="nt">allowedRunnerImageHosts</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">docker.io</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">some.private.registry</span>

<span class="w">  </span><span class="c1"># Pod history management configuration</span>
<span class="w">  </span><span class="c1"># These settings control how many completed pods are retained and for how long</span>

<span class="w">  </span><span class="c1"># successfulPodsHistoryLimit specifies the number of successful Pods to keep for inspection purposes.</span>
<span class="w">  </span><span class="c1"># When set to a positive number, only the N most recent successful Pods are kept per worker.</span>
<span class="w">  </span><span class="c1"># When set to 0, all successful Pods are removed immediately.</span>
<span class="w">  </span><span class="c1"># When unset and successfulPodsHistoryTTL is also unset, defaults to 0 (remove all).</span>
<span class="w">  </span><span class="c1"># When unset but successfulPodsHistoryTTL is set, count-based cleanup is disabled (TTL-only).</span>
<span class="w">  </span><span class="c1"># Optional</span>
<span class="w">  </span><span class="nt">successfulPodsHistoryLimit</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>

<span class="w">  </span><span class="c1"># failedPodsHistoryLimit specifies the number of failed Pods to keep for debugging purposes.</span>
<span class="w">  </span><span class="c1"># When set to a positive number, only the N most recent failed Pods are kept per worker.</span>
<span class="w">  </span><span class="c1"># When set to 0, all failed Pods are removed immediately.</span>
<span class="w">  </span><span class="c1"># When unset and failedPodsHistoryTTL is also unset, defaults to 5 (keep 5 most recent).</span>
<span class="w">  </span><span class="c1"># When unset but failedPodsHistoryTTL is set, count-based cleanup is disabled (TTL-only).</span>
<span class="w">  </span><span class="c1"># Optional</span>
<span class="w">  </span><span class="nt">failedPodsHistoryLimit</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5</span>

<span class="w">  </span><span class="c1"># successfulPodsHistoryTTL specifies the duration to keep successful Pods after they are created.</span>
<span class="w">  </span><span class="c1"># When set, successful Pods that have been created for longer than this duration are removed.</span>
<span class="w">  </span><span class="c1"># The TTL timer starts from Pod creation time for consistency with history limit ordering.</span>
<span class="w">  </span><span class="c1"># Running pods are never affected by this TTL.</span>
<span class="w">  </span><span class="c1"># When unset (nil), no time-based cleanup is performed for successful Pods.</span>
<span class="w">  </span><span class="c1"># This works in combination with successfulPodsHistoryLimit - pods are removed if they exceed EITHER limit.</span>
<span class="w">  </span><span class="c1"># Optional</span>
<span class="w">  </span><span class="nt">successfulPodsHistoryTTL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;24h&quot;</span>

<span class="w">  </span><span class="c1"># failedPodsHistoryTTL specifies the duration to keep failed Pods after they are created.</span>
<span class="w">  </span><span class="c1"># When set, failed Pods that have been created for longer than this duration are removed.</span>
<span class="w">  </span><span class="c1"># The TTL timer starts from Pod creation time for consistency with history limit ordering.</span>
<span class="w">  </span><span class="c1"># Running pods are never affected by this TTL.</span>
<span class="w">  </span><span class="c1"># When unset (nil), no time-based cleanup is performed for failed Pods.</span>
<span class="w">  </span><span class="c1"># This works in combination with failedPodsHistoryLimit - pods are removed if they exceed EITHER limit.</span>
<span class="w">  </span><span class="c1"># Optional</span>
<span class="w">  </span><span class="nt">failedPodsHistoryTTL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;72h&quot;</span>

<span class="w">  </span><span class="c1"># pod contains the spec of Pods that will be created to process Spacelift runs. This allows</span>
<span class="w">  </span><span class="c1"># you to set things like custom resource requests and limits, volumes, and service accounts.</span>
<span class="w">  </span><span class="c1"># Most of these settings are just standard Kubernetes Pod settings and are not explicitly</span>
<span class="w">  </span><span class="c1"># explained below unless they are particularly important or link directly to a Spacelift</span>
<span class="w">  </span><span class="c1"># concept.</span>
<span class="w">  </span><span class="c1"># Optional</span>
<span class="w">  </span><span class="nt">pod</span><span class="p">:</span>
<span class="w">    </span><span class="c1"># activeDeadlineSeconds defines the length of time in seconds before which the Pod will</span>
<span class="w">    </span><span class="c1"># be marked as failed. This can be used to set a deadline for your runs. The default is</span>
<span class="w">    </span><span class="c1"># 70 minutes.</span>
<span class="w">    </span><span class="nt">activeDeadlineSeconds</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4200</span>

<span class="w">    </span><span class="nt">terminationGracePeriodSeconds</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">30</span>

<span class="w">    </span><span class="c1"># volumes allows additional volumes to be attached to the run Pod. This is an array of</span>
<span class="w">    </span><span class="c1"># standard Kubernetes volume definitions.</span>
<span class="w">    </span><span class="nt">volumes</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>

<span class="w">    </span><span class="c1"># binariesCacheVolume is a special volume used to cache binaries like tool downloads (e.g.</span>
<span class="w">    </span><span class="c1"># terraform, kubectl, etc). These binaries can be reused by multiple runs, and potentially</span>
<span class="w">    </span><span class="c1"># by multiple workers in your pool. To support this you need to use a volume type that</span>
<span class="w">    </span><span class="c1"># can be read and written to by multiple Pods at the same time.</span>
<span class="w">    </span><span class="c1"># It&#39;s always mounted in the same path: /opt/spacelift/binaries_cache</span>
<span class="w">    </span><span class="nt">binariesCacheVolume</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>

<span class="w">    </span><span class="c1"># workspaceVolume Special volume shared between init containers and the worker container.</span>
<span class="w">    </span><span class="c1"># Used to populate the workspace with the repository content.</span>
<span class="w">    </span><span class="c1"># It&#39;s always mounted in the same path: /opt/spacelift/workspace</span>
<span class="w">    </span><span class="c1"># IMPORTANT: when using a custom value for this volume bear in mind that data stored in it is sensitive.</span>
<span class="w">    </span><span class="c1"># We recommend that you make sure this volume is ephemeral and is not shared with other pods.</span>
<span class="w">    </span><span class="nt">workspaceVolume</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>

<span class="w">    </span><span class="nt">serviceAccountName</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;custom-service-account&quot;</span>
<span class="w">    </span><span class="nt">automountServiceAccountToken</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">    </span><span class="nt">securityContext</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">    </span><span class="nt">imagePullSecrets</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
<span class="w">    </span><span class="nt">nodeSelector</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">    </span><span class="nt">nodeName</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="w">    </span><span class="nt">affinity</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">    </span><span class="nt">schedulerName</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="w">    </span><span class="nt">tolerations</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
<span class="w">    </span><span class="nt">hostAliases</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
<span class="w">    </span><span class="nt">dnsConfig</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">    </span><span class="nt">runtimeClassName</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="w">    </span><span class="nt">topologySpreadConstraints</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
<span class="w">    </span><span class="nt">labels</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">    </span><span class="nt">annotations</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>

<span class="w">    </span><span class="c1"># customBinariesPath allows you to add additional directories to the start of the path used</span>
<span class="w">    </span><span class="c1"># by the worker. This allows you to do things like use a custom tool version provided on the</span>
<span class="w">    </span><span class="c1"># runner image instead of the version downloaded by Spacelift.</span>
<span class="w">    </span><span class="nt">customBinariesPath</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span>

<span class="w">    </span><span class="c1"># customInitContainers allow you to define a list of custom init containers to be run before the builtin init one.</span>
<span class="w">    </span><span class="nt">customInitContainers</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>

<span class="w">    </span><span class="c1"># launcherImage allows you to customize the container image used by the init and gRPC server</span>
<span class="w">    </span><span class="c1"># containers. NOTE that by default the correct image is sent through to the controller</span>
<span class="w">    </span><span class="c1"># from the Spacelift backend, ensuring that the image used is compatible with the current</span>
<span class="w">    </span><span class="c1"># version of Spacelift.</span>
<span class="w">    </span><span class="c1">#</span>
<span class="w">    </span><span class="c1"># You can use this setting if you want to use an image stored in a container registry that</span>
<span class="w">    </span><span class="c1"># you control, but please note that doing so may cause incompatibilities between run containers</span>
<span class="w">    </span><span class="c1"># and the Spacelift backend, and we do not recommend this.</span>
<span class="w">    </span><span class="nt">launcherImage</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span>

<span class="w">    </span><span class="c1"># initContainer defines the configuration for the container responsible for preparing the</span>
<span class="w">    </span><span class="c1"># workspace for the worker. This includes downloading source code, performing role assumption,</span>
<span class="w">    </span><span class="c1"># and ensuring that the correct tools are available for your stack amongst other things.</span>
<span class="w">    </span><span class="c1"># The container name is &quot;init&quot;.</span>
<span class="w">    </span><span class="nt">initContainer</span><span class="p">:</span>
<span class="w">      </span><span class="nt">envFrom</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
<span class="w">      </span><span class="nt">env</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
<span class="w">      </span><span class="nt">volumeMounts</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
<span class="w">      </span><span class="nt">resources</span><span class="p">:</span>
<span class="w">        </span><span class="nt">requests</span><span class="p">:</span>
<span class="w">          </span><span class="c1"># Standard resource requests</span>
<span class="w">        </span><span class="nt">limits</span><span class="p">:</span>
<span class="w">          </span><span class="c1"># Standard request limits</span>
<span class="w">        </span><span class="nt">claims</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
<span class="w">      </span><span class="c1"># SecurityContext defines the security options the container should be run with.</span>
<span class="w">      </span><span class="c1"># ⚠️ Overriding this field may cause unexpected behaviors and should be avoided as much as possible.</span>
<span class="w">      </span><span class="c1"># The operator is configured to run in a least-privileged context using UID/GID 1983. Running it as root may</span>
<span class="w">      </span><span class="c1"># lead to unexpected behavior. Use at your own risk.</span>
<span class="w">      </span><span class="nt">securityContext</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>

<span class="w">    </span><span class="c1"># grpcServerContainer defines the configuration for the side-car container used by the</span>
<span class="w">    </span><span class="c1"># worker container for certain actions like uploading the current workspace, and being</span>
<span class="w">    </span><span class="c1"># notified of stop requests.</span>
<span class="w">    </span><span class="c1"># The container name is &quot;launcher-grpc&quot;.</span>
<span class="w">    </span><span class="nt">grpcServerContainer</span><span class="p">:</span>
<span class="w">      </span><span class="nt">envFrom</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
<span class="w">      </span><span class="nt">env</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
<span class="w">      </span><span class="nt">volumeMounts</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
<span class="w">      </span><span class="nt">resources</span><span class="p">:</span>
<span class="w">        </span><span class="nt">requests</span><span class="p">:</span>
<span class="w">          </span><span class="c1"># Standard resource requests</span>
<span class="w">        </span><span class="nt">limits</span><span class="p">:</span>
<span class="w">          </span><span class="c1"># Standard request limits</span>
<span class="w">        </span><span class="nt">claims</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
<span class="w">      </span><span class="c1"># SecurityContext defines the security options the container should be run with.</span>
<span class="w">      </span><span class="c1"># ⚠️ Overriding this field may cause unexpected behaviors and should be avoided as much as possible.</span>
<span class="w">      </span><span class="c1"># The operator is configured to run in a least-privileged context using UID/GID 1983. Running it as root may</span>
<span class="w">      </span><span class="c1"># lead to unexpected behavior. Use at your own risk.</span>
<span class="w">      </span><span class="nt">securityContext</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>

<span class="w">    </span><span class="c1"># workerContainer defines the configuration for the container that processes the workflow</span>
<span class="w">    </span><span class="c1"># for your run. This container uses the runner image defined by your stack.</span>
<span class="w">    </span><span class="nt">workerContainer</span><span class="p">:</span>
<span class="w">      </span><span class="nt">envFrom</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
<span class="w">      </span><span class="nt">env</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
<span class="w">      </span><span class="nt">volumeMounts</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
<span class="w">      </span><span class="nt">resources</span><span class="p">:</span>
<span class="w">        </span><span class="nt">requests</span><span class="p">:</span>
<span class="w">          </span><span class="c1"># Standard resource requests</span>
<span class="w">        </span><span class="nt">limits</span><span class="p">:</span>
<span class="w">          </span><span class="c1"># Standard request limits</span>
<span class="w">        </span><span class="nt">claims</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
<span class="w">      </span><span class="c1"># SecurityContext defines the security options the container should be run with.</span>
<span class="w">      </span><span class="c1"># ⚠️ Overriding this field may cause unexpected behaviors and should be avoided as much as possible.</span>
<span class="w">      </span><span class="c1"># The operator is configured to run in a least-privileged context using UID/GID 1983. Running it as root may</span>
<span class="w">      </span><span class="c1"># lead to unexpected behavior. Use at your own risk.</span>
<span class="w">      </span><span class="nt">securityContext</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>

<span class="w">    </span><span class="c1"># additionalSidecarContainers allows you to add any custom container to the pod.</span>
<span class="w">    </span><span class="c1"># If an additional container is running a long-running process like a database or a daemon,</span>
<span class="w">    </span><span class="c1"># it will be terminated when the spacelift run succeed.</span>
<span class="w">    </span><span class="nt">additionalSidecarContainers</span><span class="p">:</span>
<span class="w">      </span><span class="c1"># Every entry of this array needs to follow the kubernetes container spec.</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">redis</span>
<span class="w">        </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">redis</span>
</code></pre></div></td></tr></table></div>
<h3 id="pod-history-management">Pod History Management<a class="headerlink" href="#pod-history-management" title="Anchor link to this section">»</a></h3>
<p>The Kubernetes operator provides flexible pod history management to control how long completed run pods are retained. This allows you to balance between debugging capabilities and resource usage.</p>
<h4 id="overview">Overview<a class="headerlink" href="#overview" title="Anchor link to this section">»</a></h4>
<p>The pod history management system supports both count-based and time-based cleanup strategies that work together:</p>
<ul>
<li><strong>Count-based limits</strong>: Control how many completed pods to keep per worker</li>
<li><strong>Time-based cleanup (TTL)</strong>: Automatically remove pods after a specified duration</li>
<li><strong>Combined strategy</strong>: Pods are removed when they exceed <strong>either</strong> the count limit <strong>or</strong> the time limit</li>
</ul>
<h4 id="default-behavior">Default Behavior<a class="headerlink" href="#default-behavior" title="Anchor link to this section">»</a></h4>
<ul>
<li><strong>Successful pods</strong>: Removed immediately (limit: 0)  </li>
<li><strong>Failed pods</strong>: Keep 5 most recent (limit: 5)</li>
<li><strong>Time limits</strong>: No automatic TTL cleanup (unless explicitly configured)</li>
</ul>
<h4 id="configuration-options">Configuration Options<a class="headerlink" href="#configuration-options" title="Anchor link to this section">»</a></h4>
<h5 id="count-based-limits">Count-Based Limits<a class="headerlink" href="#count-based-limits" title="Anchor link to this section">»</a></h5>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="c1"># Keep 3 most recent successful pods per individual worker</span>
<span class="w">  </span><span class="nt">successfulPodsHistoryLimit</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>

<span class="w">  </span><span class="c1"># Keep 10 most recent failed pods per individual worker  </span>
<span class="w">  </span><span class="nt">failedPodsHistoryLimit</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10</span>
</code></pre></div></td></tr></table></div>
<h5 id="time-based-cleanup-ttl">Time-Based Cleanup (TTL)<a class="headerlink" href="#time-based-cleanup-ttl" title="Anchor link to this section">»</a></h5>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="c1"># Remove successful pods older than 24 hours</span>
<span class="w">  </span><span class="nt">successfulPodsHistoryTTL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;24h&quot;</span>

<span class="w">  </span><span class="c1"># Remove failed pods older than 72 hours</span>
<span class="w">  </span><span class="nt">failedPodsHistoryTTL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;72h&quot;</span>
</code></pre></div></td></tr></table></div>
<h5 id="special-modes">Special Modes<a class="headerlink" href="#special-modes" title="Anchor link to this section">»</a></h5>
<p><strong>Delete-All Mode</strong>: Set limit to 0 to remove all pods immediately</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">successfulPodsHistoryLimit</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span><span class="w">  </span><span class="c1"># Remove all successful pods immediately</span>
<span class="w">  </span><span class="nt">failedPodsHistoryLimit</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span><span class="w">      </span><span class="c1"># Remove all failed pods immediately</span>
</code></pre></div></td></tr></table></div>
<p><strong>TTL-Only Mode</strong>: Set TTL without limit for time-based cleanup only</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="c1"># Only time-based cleanup, no count limits</span>
<span class="w">  </span><span class="nt">successfulPodsHistoryTTL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;48h&quot;</span>
<span class="w">  </span><span class="c1"># successfulPodsHistoryLimit is intentionally unset</span>
</code></pre></div></td></tr></table></div>
<h4 id="behavior-details">Behavior Details<a class="headerlink" href="#behavior-details" title="Anchor link to this section">»</a></h4>
<ul>
<li><strong>Pod selection</strong>: Uses creation time for consistent ordering (oldest removed first)</li>
<li><strong>Running pods</strong>: Never affected by cleanup, only applies to completed pods</li>
<li><strong>WorkerPool scope</strong>: Cleanup is managed centrally at the WorkerPool level across all workers in the pool</li>
<li><strong>Deletion safety</strong>: Pods already being deleted are excluded from counts</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Migration from keepSuccessfulPods</p>
<p>The <code>keepSuccessfulPods</code> field has been deprecated since controller version v0.0.25 and Helm chart version 0.46.0, and has been removed in favor of the new pod history management system. If you previously used <code>keepSuccessfulPods: true</code>, set <code>successfulPodsHistoryLimit</code> to a positive value instead.</p>
</div>
<h3 id="configure-a-docker-daemon-as-a-sidecar-container">Configure a docker daemon as a sidecar container<a class="headerlink" href="#configure-a-docker-daemon-as-a-sidecar-container" title="Anchor link to this section">»</a></h3>
<p>If for some reason you need to have a docker daemon running as a sidecar, you can follow the example below.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">workers.spacelift.io/v1beta1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">WorkerPool</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">test-workerpool</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">poolSize</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="w">  </span><span class="nt">pod</span><span class="p">:</span>
<span class="w">    </span><span class="nt">workerContainer</span><span class="p">:</span>
<span class="w">      </span><span class="nt">env</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">DOCKER_HOST</span>
<span class="w">          </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tcp://localhost:2375</span>
<span class="w">    </span><span class="nt">additionalSidecarContainers</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">docker:dind</span>
<span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">docker</span>
<span class="w">        </span><span class="nt">securityContext</span><span class="p">:</span>
<span class="w">          </span><span class="nt">privileged</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">        </span><span class="nt">command</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">docker-init</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;--&quot;</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dockerd</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;--host&quot;</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tcp://127.0.0.1:2375</span>
</code></pre></div></td></tr></table></div>
<h3 id="timeouts">Timeouts<a class="headerlink" href="#timeouts" title="Anchor link to this section">»</a></h3>
<p>There are two types of timeouts that you can set</p>
<ul>
<li>The run timeout: this causes the run to fail if its duration exceeds a defined duration.</li>
<li>The log output timeout: this causes the run to fail if no logs has been generated for a defined duration.</li>
</ul>
<p>To configure the run timeout you need to configure two items - the <code>activeDeadlineSeconds</code> for the Pod, as well as the <code>SPACELIFT_LAUNCHER_RUN_TIMEOUT</code> for the worker container:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">workers.spacelift.io/v1beta1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">WorkerPool</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">test-workerpool</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">pod</span><span class="p">:</span>
<span class="w">    </span><span class="nt">activeDeadlineSeconds</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3600</span>
<span class="w">    </span><span class="nt">workerContainer</span><span class="p">:</span>
<span class="w">      </span><span class="nt">env</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">SPACELIFT_LAUNCHER_RUN_TIMEOUT</span>
<span class="w">          </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3600s</span><span class="w"> </span><span class="c1"># This is using the golang duration format, more info here https://pkg.go.dev/time#ParseDuration</span>
</code></pre></div></td></tr></table></div>
<p>To configure the logs timeout you just need to add a single environment variable to the worker container:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">workers.spacelift.io/v1beta1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">WorkerPool</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">test-workerpool</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">pod</span><span class="p">:</span>
<span class="w">    </span><span class="nt">workerContainer</span><span class="p">:</span>
<span class="w">      </span><span class="nt">env</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">SPACELIFT_LAUNCHER_LOGS_TIMEOUT</span>
<span class="w">          </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3600s</span><span class="w"> </span><span class="c1"># This is using the golang duration format, more info here https://pkg.go.dev/time#ParseDuration</span>
</code></pre></div></td></tr></table></div>
<h3 id="network-configuration">Network Configuration<a class="headerlink" href="#network-configuration" title="Anchor link to this section">»</a></h3>
<p>Your cluster configuration needs to be set up to allow the controller and the scheduled pods to reach the internet.
This is required to listen for new jobs from the Spacelift backend and report back status and run logs.</p>
<p>You can find the necessary endpoints to allow in the <a href="../worker-pools.html#network-security">Network Security</a> section.</p>
<h3 id="initialization-policies">Initialization Policies<a class="headerlink" href="#initialization-policies" title="Anchor link to this section">»</a></h3>
<p>Using an initialization policy is simple and requires three steps:</p>
<ul>
<li>Create a <code>ConfigMap</code> containing your policy.</li>
<li>Attach the <code>ConfigMap</code> as a volume in the <code>pod</code> specification for your pool.</li>
<li>Add an environment variable to the init container, telling it where to read the policy from.</li>
</ul>
<p>First, create your policy:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ConfigMap</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">test-workerpool-initialization-policy</span>
<span class="nt">data</span><span class="p">:</span>
<span class="w">  </span><span class="nt">initialization-policy.rego</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">    </span><span class="no">package spacelift</span>

<span class="w">    </span><span class="no">deny[&quot;you shall not pass&quot;] {</span>
<span class="w">        </span><span class="no">false</span>
<span class="w">    </span><span class="no">}</span>
</code></pre></div></td></tr></table></div>
<p>Next, create a <code>WorkerPool</code> definition, configuring the <code>ConfigMap</code> as a volume, and setting the custom env var:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">workers.spacelift.io/v1beta1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">WorkerPool</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">labels</span><span class="p">:</span>
<span class="w">    </span><span class="nt">app.kubernetes.io/name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">test-workerpool</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">test-workerpool</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">poolSize</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="w">  </span><span class="nt">token</span><span class="p">:</span>
<span class="w">    </span><span class="nt">secretKeyRef</span><span class="p">:</span>
<span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">test-workerpool</span>
<span class="w">      </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">token</span>
<span class="w">  </span><span class="nt">privateKey</span><span class="p">:</span>
<span class="w">    </span><span class="nt">secretKeyRef</span><span class="p">:</span>
<span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">test-workerpool</span>
<span class="w">      </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">privateKey</span>
<span class="w">  </span><span class="nt">pod</span><span class="p">:</span>
<span class="w">    </span><span class="nt">volumes</span><span class="p">:</span>
<span class="w">      </span><span class="c1"># Here&#39;s where you attach the policy to the Pod as a volume</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">initialization-policy</span>
<span class="w">        </span><span class="nt">configMap</span><span class="p">:</span>
<span class="w">          </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">test-workerpool-initialization-policy</span>
<span class="w">    </span><span class="nt">initContainer</span><span class="p">:</span>
<span class="w">      </span><span class="nt">volumeMounts</span><span class="p">:</span>
<span class="w">        </span><span class="c1"># Here&#39;s where you mount it into the init container</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">initialization-policy</span>
<span class="w">          </span><span class="nt">mountPath</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/opt/spacelift/policies/initialization&quot;</span>
<span class="w">          </span><span class="nt">readOnly</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">      </span><span class="nt">env</span><span class="p">:</span>
<span class="w">        </span><span class="c1"># And here&#39;s where you specify the path to the policy</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;SPACELIFT_LAUNCHER_RUN_INITIALIZATION_POLICY&quot;</span>
<span class="w">          </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/opt/spacelift/policies/initialization/initialization-policy.rego&quot;</span>
</code></pre></div></td></tr></table></div>
<h3 id="using-vcs-agents-with-kubernetes-workers">Using VCS Agents with Kubernetes Workers<a class="headerlink" href="#using-vcs-agents-with-kubernetes-workers" title="Anchor link to this section">»</a></h3>
<p>Using VCS Agents with Kubernetes workers is simple, and uses exactly the same approach outlined in the <a href="../worker-pools.html#vcs-agents">VCS Agents</a> section. To configure your VCS Agent environment variables in a Kubernetes WorkerPool, add them to the <code>spec.pod.initContainer.env</code> section, like in the following example:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">workers.spacelift.io/v1beta1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">WorkerPool</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">test-pool</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">poolSize</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="w">  </span><span class="nt">token</span><span class="p">:</span>
<span class="w">    </span><span class="nt">secretKeyRef</span><span class="p">:</span>
<span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">test-pool</span>
<span class="w">      </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">token</span>
<span class="w">  </span><span class="nt">privateKey</span><span class="p">:</span>
<span class="w">    </span><span class="nt">secretKeyRef</span><span class="p">:</span>
<span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">test-pool</span>
<span class="w">      </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">privateKey</span>
<span class="w">  </span><span class="nt">pod</span><span class="p">:</span>
<span class="w">    </span><span class="nt">initContainer</span><span class="p">:</span>
<span class="w">      </span><span class="nt">env</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;SPACELIFT_PRIVATEVCS_MAPPING_NAME_0&quot;</span>
<span class="w">          </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;gitlab-pool&quot;</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;SPACELIFT_PRIVATEVCS_MAPPING_BASE_ENDPOINT_0&quot;</span>
<span class="w">          </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://gitlab.myorg.com</span>
</code></pre></div></td></tr></table></div>
<h3 id="controller-metrics">Controller metrics<a class="headerlink" href="#controller-metrics" title="Anchor link to this section">»</a></h3>
<p>The workerpool controller does not expose any metrics by default.</p>
<p>You can set <code>--metrics-bind-address=:8443</code> flag to enable them and activate the Prometheus endpoint.
By default, the controller exposes metrics using HTTPS and a self-signed certificate.
This endpoint is also protected using RBAC. If you use the helm chart to deploy the controller, you can use the built-in metrics reader role to grant access.</p>
<p>You may also want to use a valid certificate for production workloads. You can mount your cert in the container to the following paths:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code>/tmp/k8s-metrics-server/serving-certs/tls.crt
/tmp/k8s-metrics-server/serving-certs/tls.key
</code></pre></div></td></tr></table></div>
<p>It's also possible to fully disable TLS on the metrics endpoint and ask the controller to export metrics using http. You need to set --metrics-secure=false flag for that.</p>
<p>More information about metrics authentication and TLS config can be found on the <a href="https://book.kubebuilder.io/reference/metrics#by-using-authnauthz-enabled-by-default">kubebuilder docs</a>.</p>
<p>More information about exposed metrics can be found by scrapping the metrics endpoint, see and example below</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># HELP spacelift_workerpool_controller_worker_creation_duration_seconds Time in seconds needed to create a new worker</span>
<span class="c1"># TYPE spacelift_workerpool_controller_worker_creation_duration_seconds histogram</span>
spacelift_workerpool_controller_worker_creation_duration_seconds_bucket<span class="o">{</span><span class="nv">le</span><span class="o">=</span><span class="s2">&quot;0.5&quot;</span><span class="o">}</span><span class="w"> </span><span class="m">0</span>
spacelift_workerpool_controller_worker_creation_duration_seconds_bucket<span class="o">{</span><span class="nv">le</span><span class="o">=</span><span class="s2">&quot;1&quot;</span><span class="o">}</span><span class="w"> </span><span class="m">0</span>
spacelift_workerpool_controller_worker_creation_duration_seconds_bucket<span class="o">{</span><span class="nv">le</span><span class="o">=</span><span class="s2">&quot;2&quot;</span><span class="o">}</span><span class="w"> </span><span class="m">0</span>
spacelift_workerpool_controller_worker_creation_duration_seconds_bucket<span class="o">{</span><span class="nv">le</span><span class="o">=</span><span class="s2">&quot;4&quot;</span><span class="o">}</span><span class="w"> </span><span class="m">0</span>
spacelift_workerpool_controller_worker_creation_duration_seconds_bucket<span class="o">{</span><span class="nv">le</span><span class="o">=</span><span class="s2">&quot;10&quot;</span><span class="o">}</span><span class="w"> </span><span class="m">0</span>
spacelift_workerpool_controller_worker_creation_duration_seconds_bucket<span class="o">{</span><span class="nv">le</span><span class="o">=</span><span class="s2">&quot;+Inf&quot;</span><span class="o">}</span><span class="w"> </span><span class="m">0</span>
spacelift_workerpool_controller_worker_creation_duration_seconds_sum<span class="w"> </span><span class="m">0</span>
spacelift_workerpool_controller_worker_creation_duration_seconds_count<span class="w"> </span><span class="m">0</span>
<span class="c1"># HELP spacelift_workerpool_controller_worker_creation_errors_total Total number of worker creation errors</span>
<span class="c1"># TYPE spacelift_workerpool_controller_worker_creation_errors_total counter</span>
spacelift_workerpool_controller_worker_creation_errors_total<span class="w"> </span><span class="m">0</span>
<span class="c1"># HELP spacelift_workerpool_controller_worker_idle_total Number of idle worker</span>
<span class="c1"># TYPE spacelift_workerpool_controller_worker_idle_total gauge</span>
spacelift_workerpool_controller_worker_idle_total<span class="o">{</span><span class="nv">pool_ulid</span><span class="o">=</span><span class="s2">&quot;01JHFXXPDC6J8XM2VB0M9CS338&quot;</span><span class="o">}</span><span class="w"> </span><span class="m">0</span>
<span class="c1"># HELP spacelift_workerpool_controller_worker_total Total number of workers</span>
<span class="c1"># TYPE spacelift_workerpool_controller_worker_total gauge</span>
spacelift_workerpool_controller_worker_total<span class="o">{</span><span class="nv">pool_ulid</span><span class="o">=</span><span class="s2">&quot;01JHFXXPDC6J8XM2VB0M9CS338&quot;</span><span class="o">}</span><span class="w"> </span><span class="m">2</span>
</code></pre></div></td></tr></table></div>
<h4 id="helm">Helm<a class="headerlink" href="#helm" title="Anchor link to this section">»</a></h4>
<p>If you are using our Helm chart to deploy the controller, you can configure metrics by switching some boolean flags in <code>values.yml</code>.</p>
<p>You can check the links in the comments below about how to secure your metrics endpoint.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># The metric service will expose a metrics endpoint that can be scraped by a prometheus instance.</span>
<span class="c1"># This is disabled by default, enable this if you want to enable controller observability.</span>
<span class="nt">metricsService</span><span class="p">:</span>
<span class="w">  </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">  </span><span class="c1"># Enabling secure will also create ClusterRole to enable authn/authz to the metrics endpoint through RBAC.</span>
<span class="w">  </span><span class="c1"># More details here https://book.kubebuilder.io/reference/metrics#by-using-authnauthz-enabled-by-default</span>
<span class="w">  </span><span class="c1"># Secure is enabled by default to be consistent with Kubebuilder defaults.</span>
<span class="w">  </span><span class="c1">#</span>
<span class="w">  </span><span class="c1"># If you want to avoid cluster roles, you can keep this set to false and configure a NetworkPolicu instead.</span>
<span class="w">  </span><span class="c1"># An example can be found in Kubebuilder docs here https://github.com/kubernetes-sigs/kubebuilder/blob/d063d5af162a772379a761fae5aaea8c91b877d4/docs/book/src/getting-started/testdata/project/config/network-policy/allow-metrics-traffic.yaml#L2</span>
<span class="w">  </span><span class="nt">secure</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">  </span><span class="nt">enableHTTP2</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
</code></pre></div></td></tr></table></div>
<h3 id="custom-binaries-path">Custom binaries path<a class="headerlink" href="#custom-binaries-path" title="Anchor link to this section">»</a></h3>
<p>Kubernetes workers download the <code>spacelift-worker</code> binary, along with any tools needed for your runs and mount them into a directory called <code>/opt/spacelift/binaries</code> in the worker. To ensure that these tools are used, this directory is added to the start of the worker's path.</p>
<p>In some situations you may wish to use your own version of tools that are bundled with the runner image used for your stack. To support this, we provide a <code>spec.pod.customBinariesPath</code> option to allow you to customize this.</p>
<p>The following example shows how to configure this:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">workers.spacelift.io/v1beta1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">WorkerPool</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">test-workerpool</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">poolSize</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="w">  </span><span class="nt">token</span><span class="p">:</span>
<span class="w">    </span><span class="nt">secretKeyRef</span><span class="p">:</span>
<span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">test-workerpool</span>
<span class="w">      </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">token</span>
<span class="w">  </span><span class="nt">privateKey</span><span class="p">:</span>
<span class="w">    </span><span class="nt">secretKeyRef</span><span class="p">:</span>
<span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">test-workerpool</span>
<span class="w">      </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">privateKey</span>
<span class="w">  </span><span class="nt">pod</span><span class="p">:</span>
<span class="w">    </span><span class="nt">customBinariesPath</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/bin&quot;</span><span class="w"> </span><span class="c1"># This will result in &quot;/bin:/opt/spacelift/binaries&quot; being added to the start of the worker&#39;s path.</span>
</code></pre></div></td></tr></table></div>
<h3 id="autoscaling">Autoscaling<a class="headerlink" href="#autoscaling" title="Anchor link to this section">»</a></h3>
<p>Careful consideration should be given when scheduling the controller in the cluster.
If the worker pool controller is evicted due to autoscaling or other reasons, it may miss MQTT messages and cause
temporary run failures.</p>
<p><strong>Therefore, it is strongly recommended to deploy the controller on nodes with high stability and availability.</strong></p>
<h4 id="eks">EKS<a class="headerlink" href="#eks" title="Anchor link to this section">»</a></h4>
<p>For EKS Auto cluster you can set the following Karpenter annotation on the controller pod.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="3:2"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio" /><input id="__tabbed_3_2" name="__tabbed_3" type="radio" /><div class="tabbed-labels"><label for="__tabbed_3_1">Kubectl</label><label for="__tabbed_3_2">Helm</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nt">karpenter.sh/do-not-disrupt</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;true&quot;</span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>--set-string<span class="w"> </span>controllerManager.podAnnotations.<span class="s2">&quot;karpenter\.sh/do-not-disrupt&quot;</span><span class="o">=</span><span class="s2">&quot;true&quot;</span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<p>For Standard clusters:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="4:2"><input checked="checked" id="__tabbed_4_1" name="__tabbed_4" type="radio" /><input id="__tabbed_4_2" name="__tabbed_4" type="radio" /><div class="tabbed-labels"><label for="__tabbed_4_1">Kubectl</label><label for="__tabbed_4_2">Helm</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nt">cluster-autoscaler.kubernetes.io/safe-to-evict</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;false&quot;</span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>--set-string<span class="w"> </span>controllerManager.podAnnotations.<span class="s2">&quot;cluster-autoscaler\.kubernetes\.io/safe-to-evict&quot;</span><span class="o">=</span><span class="s2">&quot;false&quot;</span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<h4 id="gke">GKE<a class="headerlink" href="#gke" title="Anchor link to this section">»</a></h4>
<p>For autopilot cluster you can set the following annotation on the controller pod.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="5:2"><input checked="checked" id="__tabbed_5_1" name="__tabbed_5" type="radio" /><input id="__tabbed_5_2" name="__tabbed_5" type="radio" /><div class="tabbed-labels"><label for="__tabbed_5_1">Kubectl</label><label for="__tabbed_5_2">Helm</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># Bear in mind that this will not 100% prevent autopilot from evicting pods.</span>
<span class="c1"># Please refer to autopilot documentation for more details.</span>
<span class="nt">autopilot.gke.io/priority</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">high</span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>--set-string<span class="w"> </span>controllerManager.podAnnotations.<span class="s2">&quot;autopilot\.gke\.io/priority&quot;</span><span class="o">=</span><span class="s2">&quot;high&quot;</span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<p>For Standard clusters:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="6:2"><input checked="checked" id="__tabbed_6_1" name="__tabbed_6" type="radio" /><input id="__tabbed_6_2" name="__tabbed_6" type="radio" /><div class="tabbed-labels"><label for="__tabbed_6_1">Kubectl</label><label for="__tabbed_6_2">Helm</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nt">cluster-autoscaler.kubernetes.io/safe-to-evict</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;false&quot;</span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>--set-string<span class="w"> </span>controllerManager.podAnnotations.<span class="s2">&quot;cluster-autoscaler\.kubernetes\.io/safe-to-evict&quot;</span><span class="o">=</span><span class="s2">&quot;false&quot;</span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<h4 id="aks">AKS<a class="headerlink" href="#aks" title="Anchor link to this section">»</a></h4>
<p>For Azure cluster you can set the following annotation on the controller pod.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="7:2"><input checked="checked" id="__tabbed_7_1" name="__tabbed_7" type="radio" /><input id="__tabbed_7_2" name="__tabbed_7" type="radio" /><div class="tabbed-labels"><label for="__tabbed_7_1">Kubectl</label><label for="__tabbed_7_2">Helm</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nt">cluster-autoscaler.kubernetes.io/safe-to-evict</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;false&quot;</span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>--set-string<span class="w"> </span>controllerManager.podAnnotations.<span class="s2">&quot;cluster-autoscaler\.kubernetes\.io/safe-to-evict&quot;</span><span class="o">=</span><span class="s2">&quot;false&quot;</span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<h3 id="fips">FIPS<a class="headerlink" href="#fips" title="Anchor link to this section">»</a></h3>
<p>With Go 1.24, the Go runtime <a href="https://tip.golang.org/doc/security/fips140" rel="nofollow">has added support for FIPS mode</a>. This allows you to run your Spacelift workerpool-controller in a <a href="https://en.wikipedia.org/wiki/FIPS_140-3" rel="nofollow">FIPS 140-3</a>-compliant manner.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Note that the above Go documentation mentions that FIPS mode is best effort based and doesn't guarantee compliance with all requirements.</p>
</div>
<p>If you'd like to have the workerpool-controller run in FIPS mode, turn the <code>controllerManager.enforceFips140</code> flag to <code>true</code> in the Helm chart values. We introduced this in the <a href="https://github.com/spacelift-io/spacelift-helm-charts/releases/tag/v0.42.0" rel="nofollow">v0.42.0 release</a> of the Helm chart.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="8:2"><input checked="checked" id="__tabbed_8_1" name="__tabbed_8" type="radio" /><input id="__tabbed_8_2" name="__tabbed_8" type="radio" /><div class="tabbed-labels"><label for="__tabbed_8_1">Helm</label><label for="__tabbed_8_2">Kubernetes</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>You can set this in your <code>values.yaml</code> file like so:
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nt">controllerManager</span><span class="p">:</span>
<span class="w">  </span><span class="nt">enforceFips140</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</code></pre></div></td></tr></table></div></p>
<p>Or pass it as a parameter: <code>--set controllerManager.enforceFips140=true</code>.</p>
</div>
<div class="tabbed-block">
<p>When deployed without helm, you'll need to set the <code>GODEBUG=fips140=only</code> environment variable manually on the controller container. The command to do this is:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># List all deployments to get the name of the controller deployment:</span>
kubectl<span class="w"> </span>get<span class="w"> </span>deployments<span class="w"> </span>--all-namespaces

<span class="c1"># Edit the deployment to add the environment variable:</span>
kubectl<span class="w"> </span>edit<span class="w"> </span>deployment/&lt;deployment-name&gt;<span class="w"> </span>-n<span class="w"> </span>&lt;namespace&gt;
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<p>During the controller's startup, you should see the <code>FIPS 140 mode {"enabled": true}</code> message in the logs.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This will only make the controller run in FIPS mode. The Spacelift worker pods are not affected by this setting - they are not compliant with FIPS 140-3 yet.</p>
</div>
<h2 id="scaling-a-pool">Scaling a pool<a class="headerlink" href="#scaling-a-pool" title="Anchor link to this section">»</a></h2>
<p>To scale your WorkerPool, you can either edit the resource in Kubernetes, or use the <code>kubectl scale</code> command:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>kubectl<span class="w"> </span>scale<span class="w"> </span>workerpools<span class="w"> </span>my-worker-pool<span class="w"> </span>--replicas<span class="o">=</span><span class="m">5</span>
</code></pre></div></td></tr></table></div>
<h2 id="billing-for-kubernetes-workers">Billing for Kubernetes Workers<a class="headerlink" href="#billing-for-kubernetes-workers" title="Anchor link to this section">»</a></h2>
<p>Kubernetes workers are billed based on the number of provisioned workers that you have, exactly the same as for any of our other ways of running workers. What this means in practice is that you will be billed based on the number of workers defined by the <code>poolSize</code> of your WorkerPool, <em>even when those workers are idle and not processing any runs</em>.</p>
<h2 id="migrating-from-docker-in-docker">Migrating from Docker-in-Docker<a class="headerlink" href="#migrating-from-docker-in-docker" title="Anchor link to this section">»</a></h2>
<p>If you currently use our <a href="https://github.com/spacelift-io/spacelift-helm-charts/tree/main/spacelift-worker-pool">Docker-in-Docker Helm chart</a> to run your worker pools, we recommend that you switch to our worker pool operator. For full details of how to install the operator and setup a worker pool, please see the <a href="#installation">installation</a> section.</p>
<p>The rest of this section provides useful information to be aware of when switching over from the Docker-in-Docker approach to the operator.</p>
<h3 id="why-migrate">Why migrate<a class="headerlink" href="#why-migrate" title="Anchor link to this section">»</a></h3>
<p>There are a number of improvements with the Kubernetes operator over the previous Docker-in-Docker approach, including:</p>
<ul>
<li>The operator does not require privileged pods unlike the Docker-in-Docker approach.</li>
<li>The operator creates standard Kubernetes pods to handle runs. This provides advantages including Kubernetes being aware of the run workloads that are executing as well as the ability to use built-in Kubernetes functionality like service accounts and affinity.</li>
<li>The operator only creates pods when runs are scheduled. This means that while your workers are idle, they are not running pods that are using up resources in your cluster.</li>
<li>The operator can safely handle scaling down the number of workers in a pool while making sure that in-progress runs are not killed.</li>
</ul>
<h3 id="deploying-workers">Deploying workers<a class="headerlink" href="#deploying-workers" title="Anchor link to this section">»</a></h3>
<p>One major difference between the Docker-in-Docker Helm chart and the new operator is that the new chart only deploys the operator, and not any workers. To deploy workers you need to create <em>WorkerPool</em> resources after the operator has been deployed. See the section on <a href="#create-a-workerpool">creating a worker pool</a> for more details.</p>
<h3 id="testing-both-alongside-each-other">Testing both alongside each other<a class="headerlink" href="#testing-both-alongside-each-other" title="Anchor link to this section">»</a></h3>
<p>You can run both the new operator as well as your existing Docker-in-Docker workers. In fact you can even connect both to the same Spacelift worker pool. This allows you to test the operator to make sure everything is working before switching over.</p>
<h3 id="customizing-timeouts">Customizing timeouts<a class="headerlink" href="#customizing-timeouts" title="Anchor link to this section">»</a></h3>
<p>If you are currently using <code>SPACELIFT_LAUNCHER_RUN_TIMEOUT</code> or <code>SPACELIFT_LAUNCHER_LOGS_TIMEOUT</code>, please see the section on <a href="#timeouts">timeouts</a> to find out how to achieve this with the operator.</p>
<h3 id="storage-configuration">Storage configuration<a class="headerlink" href="#storage-configuration" title="Anchor link to this section">»</a></h3>
<p>If you are using custom storage volumes, you can configure these via the <code>spec.pod</code> section of the WorkerPool resource. Please see the section on <a href="#volumes">volumes</a> for more information.</p>
<h3 id="pool-size">Pool size<a class="headerlink" href="#pool-size" title="Anchor link to this section">»</a></h3>
<p>In the Docker-in-Docker approach, the number of workers is controlled by the <code>replicaCount</code> value of the Chart which controls the number of replicas in the Deployment. In the operator approach, the pool size is configured by the <code>spec.poolSize</code> property. Please see the section on <a href="#scaling-a-pool">scaling</a> for information about how to scale your pool up or down.</p>
<h2 id="troubleshooting">Troubleshooting<a class="headerlink" href="#troubleshooting" title="Anchor link to this section">»</a></h2>
<h3 id="listing-workerpools-and-workers">Listing WorkerPools and Workers<a class="headerlink" href="#listing-workerpools-and-workers" title="Anchor link to this section">»</a></h3>
<p>To list all of your WorkerPools, you can use the following command:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>kubectl<span class="w"> </span>get<span class="w"> </span>workerpools
</code></pre></div></td></tr></table></div>
<p>To list all of your Workers, use the following command:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>kubectl<span class="w"> </span>get<span class="w"> </span>workers
</code></pre></div></td></tr></table></div>
<p>To list the Workers for a specific pool, use the following command (replace <code>&lt;worker-pool-id&gt;</code> with the ID of the pool from Spacelift):</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>kubectl<span class="w"> </span>get<span class="w"> </span>workers<span class="w"> </span>-l<span class="w"> </span><span class="s2">&quot;workers.spacelift.io/workerpool=&lt;worker-pool-id&gt;&quot;</span>
</code></pre></div></td></tr></table></div>
<h3 id="listing-run-pods">Listing run pods<a class="headerlink" href="#listing-run-pods" title="Anchor link to this section">»</a></h3>
<p>When a run is scheduled, a new pod is created to process that run. It's important to note that a single worker can only process a single run at a time, making it easy to find pods by run or worker IDs.</p>
<p>To list the pod for a specific run, use the following command (replacing <code>&lt;run-id&gt;</code> with the ID of the run):</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>kubectl<span class="w"> </span>get<span class="w"> </span>pods<span class="w"> </span>-l<span class="w"> </span><span class="s2">&quot;workers.spacelift.io/run-id=&lt;run-id&gt;&quot;</span>
</code></pre></div></td></tr></table></div>
<p>To find the pod for a particular worker, use the following command (replacing <code>&lt;worker-id&gt;</code> with the ID of the worker):</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>kubectl<span class="w"> </span>get<span class="w"> </span>pods<span class="w"> </span>-l<span class="w"> </span><span class="s2">&quot;workers.spacelift.io/worker=&lt;worker-id&gt;&quot;</span>
</code></pre></div></td></tr></table></div>
<h3 id="workers-not-connecting-to-spacelift">Workers not connecting to Spacelift<a class="headerlink" href="#workers-not-connecting-to-spacelift" title="Anchor link to this section">»</a></h3>
<p>If you have created a WorkerPool in Kubernetes but no workers have shown up in Spacelift, use <code>kubectl get workerpools</code> to view your pool:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code>kubectl<span class="w"> </span>get<span class="w"> </span>workerpools
NAME<span class="w">         </span>DESIRED<span class="w"> </span>POOL<span class="w"> </span>SIZE<span class="w">   </span>ACTUAL<span class="w"> </span>POOL<span class="w"> </span>SIZE
local-pool<span class="w">   </span><span class="m">2</span>
</code></pre></div></td></tr></table></div>
<p>If the <em>actual pool size</em> for your pool is not populated, it typically indicates an issue with your pool credentials. The first thing to do is to use <code>kubectl describe</code> to inspect your pool and check for any events indicating errors:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span></pre></div></td><td class="code"><div><pre><span></span><code>kubectl<span class="w"> </span>describe<span class="w"> </span>workerpool<span class="w"> </span>local-pool
Name:<span class="w">         </span>local-pool
Namespace:<span class="w">    </span>default
Labels:<span class="w">       </span>app.kubernetes.io/name<span class="o">=</span>local-pool
<span class="w">              </span>workers.spacelift.io/ulid<span class="o">=</span>01HPS9HDSWCQ73RPDTVAK0KK0A
Annotations:<span class="w">  </span>&lt;none&gt;
API<span class="w"> </span>Version:<span class="w">  </span>workers.spacelift.io/v1beta1
Kind:<span class="w">         </span>WorkerPool

...

Events:
<span class="w">  </span>Type<span class="w">     </span>Reason<span class="w">                    </span>Age<span class="w">              </span>From<span class="w">                   </span>Message
<span class="w">  </span>----<span class="w">     </span>------<span class="w">                    </span>----<span class="w">             </span>----<span class="w">                   </span>-------
<span class="w">  </span>Warning<span class="w">  </span>WorkerPoolCannotRegister<span class="w">  </span>7s<span class="w"> </span><span class="o">(</span>x2<span class="w"> </span>over<span class="w"> </span>7s<span class="o">)</span><span class="w">  </span>workerpool-controller<span class="w">  </span>Unable<span class="w"> </span>to<span class="w"> </span>register<span class="w"> </span>worker<span class="w"> </span>pool:<span class="w"> </span>cannot<span class="w"> </span>retrieve<span class="w"> </span>workerpool<span class="w"> </span>token:<span class="w"> </span>unable<span class="w"> </span>to<span class="w"> </span>base64<span class="w"> </span>decode<span class="w"> </span>privateKey:<span class="w"> </span>illegal<span class="w"> </span>base64<span class="w"> </span>data<span class="w"> </span>at<span class="w"> </span>input<span class="w"> </span>byte<span class="w"> </span><span class="m">4364</span>
</code></pre></div></td></tr></table></div>
<p>In the example above, we can see that the private key for the pool is invalid.</p>
<p>If the WorkerPool events don't provide any useful information, another option is to take a look at the logs for the controller pod using <code>kubectl logs</code>, for example:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>kubectl<span class="w"> </span>logs<span class="w"> </span>-n<span class="w"> </span>spacelift-worker-controller-system<span class="w"> </span>spacelift-workerpool-controller-controller-manager-bd9bcb46fjdt
</code></pre></div></td></tr></table></div>
<p>For example, if your token is invalid, you may find a log entry similar to the following:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>cannot retrieve workerpool token: unable to base64 decode token: illegal base64 data at input byte 2580
</code></pre></div></td></tr></table></div>
<p>Another common reason that can cause workers to fail to connect with Spacelift is network or firewall rules blocking connections to AWS IoT Core. Please see our <a href="../worker-pools.html#network-security">network security</a> section for more details on the networking requirements for workers.</p>
<h3 id="run-not-starting">Run not starting<a class="headerlink" href="#run-not-starting" title="Anchor link to this section">»</a></h3>
<p>If a run is scheduled to a worker but it gets stuck in the preparing phase for a long time, it may be caused by various issues like CPU or memory limits that are too low, or not being able to pull the stack's runner image. The best option in this scenario is to find the run pod and describe it to find out what's happening.</p>
<p>For example, in the following scenario, we can use <code>kubectl get pods</code> to discover that the run pod is stuck in <code>ImagePullBackOff</code>, meaning that it is unable to pull one of its container images:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code>$<span class="w"> </span>kubectl<span class="w"> </span>get<span class="w"> </span>pods<span class="w"> </span>-l<span class="w"> </span><span class="s2">&quot;workers.spacelift.io/run-id=01HPS6XB76J1JB3EHSK4AWE5AB&quot;</span>
NAME<span class="w">                                     </span>READY<span class="w">   </span>STATUS<span class="w">             </span>RESTARTS<span class="w">   </span>AGE
01hps6xb76j1jb3ehsk4awe5ab-preparing-2<span class="w">   </span><span class="m">1</span>/2<span class="w">     </span>ImagePullBackOff<span class="w">   </span><span class="m">0</span><span class="w">          </span>3m2s
</code></pre></div></td></tr></table></div>
<p>If we describe that pod, we can get more details about the failure:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span></pre></div></td><td class="code"><div><pre><span></span><code>$<span class="w"> </span>kubectl<span class="w"> </span>describe<span class="w"> </span>pods<span class="w"> </span>-l<span class="w"> </span><span class="s2">&quot;workers.spacelift.io/run-id=01HPS6XB76J1JB3EHSK4AWE5AB&quot;</span>
Name:<span class="w">             </span>01hps6xb76j1jb3ehsk4awe5ab-preparing-2
Namespace:<span class="w">        </span>default
Priority:<span class="w">         </span><span class="m">0</span>
Service<span class="w"> </span>Account:<span class="w">  </span>default
Node:<span class="w">             </span>kind-control-plane/172.18.0.2
Start<span class="w"> </span>Time:<span class="w">       </span>Fri,<span class="w"> </span><span class="m">16</span><span class="w"> </span>Feb<span class="w"> </span><span class="m">2024</span><span class="w"> </span><span class="m">15</span>:00:18<span class="w"> </span>+0000
Labels:<span class="w">           </span>workers.spacelift.io/run-id<span class="o">=</span>01HPS6XB76J1JB3EHSK4AWE5AB
<span class="w">                  </span>workers.spacelift.io/worker<span class="o">=</span>01HPS6K4BNB7BPHCDHDWFAMJNV

...

Events:
<span class="w">  </span>Type<span class="w">     </span>Reason<span class="w">     </span>Age<span class="w">                    </span>From<span class="w">               </span>Message
<span class="w">  </span>----<span class="w">     </span>------<span class="w">     </span>----<span class="w">                   </span>----<span class="w">               </span>-------
<span class="w">  </span>Normal<span class="w">   </span>Scheduled<span class="w">  </span>4m23s<span class="w">                  </span>default-scheduler<span class="w">  </span>Successfully<span class="w"> </span>assigned<span class="w"> </span>default/01hps6xb76j1jb3ehsk4awe5ab-preparing-2<span class="w"> </span>to<span class="w"> </span>kind-control-plane
<span class="w">  </span>Normal<span class="w">   </span>Pulled<span class="w">     </span>4m23s<span class="w">                  </span>kubelet<span class="w">            </span>Container<span class="w"> </span>image<span class="w"> </span><span class="s2">&quot;public.ecr.aws/spacelift/launcher:d0a81de1085a7cc4f4561a776ab74a43d4497f6c&quot;</span><span class="w"> </span>already<span class="w"> </span>present<span class="w"> </span>on<span class="w"> </span>machine
<span class="w">  </span>Normal<span class="w">   </span>Created<span class="w">    </span>4m23s<span class="w">                  </span>kubelet<span class="w">            </span>Created<span class="w"> </span>container<span class="w"> </span>init
<span class="w">  </span>Normal<span class="w">   </span>Started<span class="w">    </span>4m23s<span class="w">                  </span>kubelet<span class="w">            </span>Started<span class="w"> </span>container<span class="w"> </span>init
<span class="w">  </span>Normal<span class="w">   </span>Pulled<span class="w">     </span>4m15s<span class="w">                  </span>kubelet<span class="w">            </span>Container<span class="w"> </span>image<span class="w"> </span><span class="s2">&quot;public.ecr.aws/spacelift/launcher:d0a81de1085a7cc4f4561a776ab74a43d4497f6c&quot;</span><span class="w"> </span>already<span class="w"> </span>present<span class="w"> </span>on<span class="w"> </span>machine
<span class="w">  </span>Normal<span class="w">   </span>Created<span class="w">    </span>4m15s<span class="w">                  </span>kubelet<span class="w">            </span>Created<span class="w"> </span>container<span class="w"> </span>launcher-grpc
<span class="w">  </span>Normal<span class="w">   </span>Started<span class="w">    </span>4m15s<span class="w">                  </span>kubelet<span class="w">            </span>Started<span class="w"> </span>container<span class="w"> </span>launcher-grpc
<span class="w">  </span>Normal<span class="w">   </span>Pulling<span class="w">    </span>3m36s<span class="w"> </span><span class="o">(</span>x3<span class="w"> </span>over<span class="w"> </span>4m15s<span class="o">)</span><span class="w">  </span>kubelet<span class="w">            </span>Pulling<span class="w"> </span>image<span class="w"> </span><span class="s2">&quot;someone/non-existent-image:1234&quot;</span>
<span class="w">  </span>Warning<span class="w">  </span>Failed<span class="w">     </span>3m35s<span class="w"> </span><span class="o">(</span>x3<span class="w"> </span>over<span class="w"> </span>4m14s<span class="o">)</span><span class="w">  </span>kubelet<span class="w">            </span>Failed<span class="w"> </span>to<span class="w"> </span>pull<span class="w"> </span>image<span class="w"> </span><span class="s2">&quot;someone/non-existent-image:1234&quot;</span>:<span class="w"> </span>rpc<span class="w"> </span>error:<span class="w"> </span><span class="nv">code</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>Unknown<span class="w"> </span><span class="nv">desc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>failed<span class="w"> </span>to<span class="w"> </span>pull<span class="w"> </span>and<span class="w"> </span>unpack<span class="w"> </span>image<span class="w"> </span><span class="s2">&quot;docker.io/someone/non-existent-image:1234&quot;</span>:<span class="w"> </span>failed<span class="w"> </span>to<span class="w"> </span>resolve<span class="w"> </span>reference<span class="w"> </span><span class="s2">&quot;docker.io/someone/non-existent-image:1234&quot;</span>:<span class="w"> </span>pull<span class="w"> </span>access<span class="w"> </span>denied,<span class="w"> </span>repository<span class="w"> </span>does<span class="w"> </span>not<span class="w"> </span>exist<span class="w"> </span>or<span class="w"> </span>may<span class="w"> </span>require<span class="w"> </span>authorization:<span class="w"> </span>server<span class="w"> </span>message:<span class="w"> </span>insufficient_scope:<span class="w"> </span>authorization<span class="w"> </span>failed
<span class="w">  </span>Warning<span class="w">  </span>Failed<span class="w">     </span>3m35s<span class="w"> </span><span class="o">(</span>x3<span class="w"> </span>over<span class="w"> </span>4m14s<span class="o">)</span><span class="w">  </span>kubelet<span class="w">            </span>Error:<span class="w"> </span>ErrImagePull
<span class="w">  </span>Normal<span class="w">   </span>BackOff<span class="w">    </span>2m57s<span class="w"> </span><span class="o">(</span>x5<span class="w"> </span>over<span class="w"> </span>4m13s<span class="o">)</span><span class="w">  </span>kubelet<span class="w">            </span>Back-off<span class="w"> </span>pulling<span class="w"> </span>image<span class="w"> </span><span class="s2">&quot;someone/non-existent-image:1234&quot;</span>
<span class="w">  </span>Warning<span class="w">  </span>Failed<span class="w">     </span>2m57s<span class="w"> </span><span class="o">(</span>x5<span class="w"> </span>over<span class="w"> </span>4m13s<span class="o">)</span><span class="w">  </span>kubelet<span class="w">            </span>Error:<span class="w"> </span>ImagePullBackOff
</code></pre></div></td></tr></table></div>
<p>In this case, we can see that the problem is that the <code>someone/non-existent-image:1234</code> container image cannot be pulled, meaning that the run can't start. In this situation the fix would be to add the correct authentication to allow your Kubernetes cluster to pull the image, or to adjust your stack settings to refer to the correct image if it is wrong.</p>
<p>Similarly, if you specify too low memory limits for one of the containers in the run pod Kubernetes may end up killing it. You can find this out in exactly the same way:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span></pre></div></td><td class="code"><div><pre><span></span><code>$<span class="w"> </span>kubectl<span class="w"> </span>get<span class="w"> </span>pods<span class="w"> </span>-l<span class="w"> </span><span class="s2">&quot;workers.spacelift.io/run-id=01HPS85J6SRG37DG6FGNRZGHMM&quot;</span>
NAME<span class="w">                                     </span>READY<span class="w">   </span>STATUS<span class="w">           </span>RESTARTS<span class="w">   </span>AGE
01hps85j6srg37dg6fgnrzghmm-preparing-2<span class="w">   </span><span class="m">0</span>/2<span class="w">     </span>Init:OOMKilled<span class="w">   </span><span class="m">0</span><span class="w">          </span>24s

$<span class="w"> </span>kubectl<span class="w"> </span>describe<span class="w"> </span>pods<span class="w"> </span>-l<span class="w"> </span><span class="s2">&quot;workers.spacelift.io/run-id=01HPS85J6SRG37DG6FGNRZGHMM&quot;</span>
Name:<span class="w">             </span>01hps85j6srg37dg6fgnrzghmm-preparing-2
Namespace:<span class="w">        </span>default
Priority:<span class="w">         </span><span class="m">0</span>
Service<span class="w"> </span>Account:<span class="w">  </span>default
Node:<span class="w">             </span>kind-control-plane/172.18.0.2
Start<span class="w"> </span>Time:<span class="w">       </span>Fri,<span class="w"> </span><span class="m">16</span><span class="w"> </span>Feb<span class="w"> </span><span class="m">2024</span><span class="w"> </span><span class="m">15</span>:22:17<span class="w"> </span>+0000
Labels:<span class="w">           </span>workers.spacelift.io/run-id<span class="o">=</span>01HPS85J6SRG37DG6FGNRZGHMM
<span class="w">                  </span>workers.spacelift.io/worker<span class="o">=</span>01HPS7FRV3JJWWVJ1P9RQ7JN2N
Annotations:<span class="w">      </span>&lt;none&gt;
Status:<span class="w">           </span>Failed
IP:<span class="w">               </span><span class="m">10</span>.244.0.14
IPs:
<span class="w">  </span>IP:<span class="w">           </span><span class="m">10</span>.244.0.14
Controlled<span class="w"> </span>By:<span class="w">  </span>Worker/local-pool-01hps7frv3jjwwvj1p9rq7jn2n
Init<span class="w"> </span>Containers:
<span class="w">  </span>init:
<span class="w">    </span>Container<span class="w"> </span>ID:<span class="w">  </span>containerd://567f505a638e0b42e23d275a5a1b75f40ac6b706490ada9ea7901219b54e43c8
<span class="w">    </span>Image:<span class="w">         </span>public.ecr.aws/spacelift-dev/launcher:2ff3b7ad1d532ca51b5b2c54ded40ad19669d379
<span class="w">    </span>Image<span class="w"> </span>ID:<span class="w">      </span>public.ecr.aws/spacelift-dev/launcher@sha256:baa99ca405f5c42cc16b5e93b5faa9467c8431c048f814e9623bdfee0bef8c4d
<span class="w">    </span>Port:<span class="w">          </span>&lt;none&gt;
<span class="w">    </span>Host<span class="w"> </span>Port:<span class="w">     </span>&lt;none&gt;
<span class="w">    </span>Command:
<span class="w">      </span>/usr/bin/spacelift-launcher
<span class="w">    </span>Args:
<span class="w">      </span>init
<span class="w">    </span>State:<span class="w">          </span>Terminated
<span class="w">      </span>Reason:<span class="w">       </span>OOMKilled
<span class="w">      </span>Exit<span class="w"> </span>Code:<span class="w">    </span><span class="m">137</span>
<span class="w">      </span>Started:<span class="w">      </span>Fri,<span class="w"> </span><span class="m">16</span><span class="w"> </span>Feb<span class="w"> </span><span class="m">2024</span><span class="w"> </span><span class="m">15</span>:22:17<span class="w"> </span>+0000
<span class="w">      </span>Finished:<span class="w">     </span>Fri,<span class="w"> </span><span class="m">16</span><span class="w"> </span>Feb<span class="w"> </span><span class="m">2024</span><span class="w"> </span><span class="m">15</span>:22:17<span class="w"> </span>+0000

...
</code></pre></div></td></tr></table></div>
<h3 id="getting-help-with-run-issues">Getting help with run issues<a class="headerlink" href="#getting-help-with-run-issues" title="Anchor link to this section">»</a></h3>
<p>If you're having trouble understanding why a run isn't starting, is failing, or is hanging, and want to reach out for support, please include the output of the following commands (replacing the relevant IDs/names as well as specifying the namespace of your worker pool):</p>
<ul>
<li><code>kubectl get pods  --namespace &lt;worker-pool-namespace&gt; -l "workers.spacelift.io/run-id=&lt;run-id&gt;"</code></li>
<li><code>kubectl describe pods --namespace &lt;worker-pool-namespace&gt; -l "workers.spacelift.io/run-id=&lt;run-id&gt;"</code></li>
<li><code>kubectl logs --namespace &lt;worker-pool-namespace&gt; -l "workers.spacelift.io/run-id=&lt;run-id&gt;" --all-containers --prefix --timestamps</code></li>
<li><code>kubectl events --namespace &lt;worker-pool-namespace&gt; workers/&lt;worker-name&gt; -o json</code></li>
</ul>
<p>Please also include your controller logs from 10 minutes before the run started. You can do this using the <code>--since-time</code> flag, like in the following example:</p>
<ul>
<li><code>kubectl logs -n spacelift-worker-controller-system spacelift-worker-controllercontroller-manager-6f974d9b6d-kx566 --since-time="2024-04-02T09:00:00Z" --all-containers --prefix --timestamps</code></li>
</ul>
<h3 id="custom-runner-images">Custom runner images<a class="headerlink" href="#custom-runner-images" title="Anchor link to this section">»</a></h3>
<p>Please note that if you are using a custom runner image for your stack, it <strong>must</strong> include a Spacelift user with a UID of 1983. If your image does not include this user, it can cause permission issues during runs, for example while trying to write out configuration files while preparing the run.</p>
<p>Please see our <a href="../../integrations/docker.html#customizing-the-runner-image">instructions on customizing the runner image</a> for more information.</p>
<h3 id="networking-issues-caused-by-pod-identity">Networking issues caused by Pod identity<a class="headerlink" href="#networking-issues-caused-by-pod-identity" title="Anchor link to this section">»</a></h3>
<p>When a run is assigned to a worker, the controller creates a new Pod to process that run. The Pod has labels indicating the worker and run ID, and looks something like this:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Pod</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">labels</span><span class="p">:</span>
<span class="w">    </span><span class="nt">workers.spacelift.io/run-id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">01HN37WC3MCNE3CY9HAHWRF06K</span>
<span class="w">    </span><span class="nt">workers.spacelift.io/worker</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">01HN356WGGNGTXA8PHYRRKEEZ5</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">01hn37wc3mcne3cy9hahwrf06k-preparing-2</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">... rest of the pod spec</span>
</code></pre></div></td></tr></table></div>
<p>Because the set of labels are unique for each run being processed, this can cause problems with systems like <a href="https://cilium.io/">Cilium</a> that use Pod labels to determine the identity of each Pod, leading to your runs having networking issues. If you are using a system like this, you may want to exclude the <code>workers.spacelift.io/*</code> labels from being used to determine network identity.</p>





                
  </div>

              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      © 2025 - Spacelift, Inc. All rights reserved.
    </div>
  
  
</div>
      
        <div class="md-social">
  
    
    
    
    
    <a href="https://www.linkedin.com/company/spacelift-io/" target="_blank" rel="noopener" title="Spacelift on LinkedIn" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg>
    </a>
  
    
    
    
    
    <a href="https://twitter.com/spaceliftio" target="_blank" rel="noopener" title="Spacelift on Twitter" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
    </a>
  
    
    
    
    
    <a href="https://github.com/spacelift-io" target="_blank" rel="noopener" title="Spacelift on GitHub" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
    
    
    
    
    <a href="https://www.youtube.com/channel/UCYKTi_SzykyIe6jqj3t_kXg" target="_blank" rel="noopener" title="Spacelift on YouTube" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"/></svg>
    </a>
  
    
    
    
    
    <a href="https://www.facebook.com/spaceliftio-103558488009736/" target="_blank" rel="noopener" title="Spacelift on Facebook" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["content.code.annotate", "content.code.copy", "content.tabs.link", "navigation.indexes", "navigation.instant", "navigation.sections"], "search": "../../assets/javascripts/workers/search.74e28a9f.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
  
      <script src="../../assets/javascripts/bundle.220ee61c.min.js"></script>
      
    

  
    
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-W9B4T9S"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>

    
    <script type="text/javascript" id="hs-script-loader" async defer src="//js.hs-scripts.com/7706335.js"></script>
  

  <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body>
</html>